<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Pylon: pylon C Programmer&#39;s Guide</title>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="modified_doxygen-unix.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
</head>
<body>
<div id="TopBanner"><table width="100%"><tr>
    <td width="196px"><img src="Pylon_Logo.png" alt="Pylon Logo" width="196px"></td>
    <td width="99%"></td>
    <td width="184px"><img src="Basler_Logo.png" alt="Basler Logo" width="184px"></td>
</tr></table></div>
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">pylon C Programmer&#39;s Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Sample Programs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a class="el" href="samples.html#samples_chunks">Chunks Sample</a> </li>
<li><a class="el" href="samples.html#samples_events">Events Sample</a> </li>
<li><a class="el" href="samples.html#samples_genapiparam">GenApiParam Sample</a> </li>
<li><a class="el" href="samples.html#samples_grabtwocameras">GrabTwoCameras Sample</a> </li>
<li><a class="el" href="samples.html#samples_overlappedgrab">OverlappedGrab Sample</a> </li>
<li><a class="el" href="samples.html#samples_parametrizecamera">ParametrizeCamera Sample</a> </li>
<li><a class="el" href="samples.html#samples_simplegrab">SimpleGrab Sample</a> </li>
<li><a class="el" href="samples.html#samples_surpriseremoval">SurpriseRemoval Sample</a> </li>
<li><a class="el" href="samples.html#samples_triggeredgrab">ActionCommands Sample</a></li>
</ul>
<h1><a class="anchor" id="samples_chunks"></a>
Chunks Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">   Basler cameras provide &quot;chunk features&quot;: The cameras can generate certain information about each image,</span></div><div class="line"><span class="comment">   e.g. frame counters, time stamps, and CRC checksums, which is appended to the image data as data &quot;chunks&quot;.</span></div><div class="line"><span class="comment">   This sample illustrates how to enable chunk features, how to grab</span></div><div class="line"><span class="comment">   images, and how to process the appended data. When the camera is in chunk mode, it transfers data blocks</span></div><div class="line"><span class="comment">   that are partitioned into chunks. The first chunk is always the image data. When chunk features are enabled,</span></div><div class="line"><span class="comment">   the image data chunk is followed by chunks containing the information generated by the chunk features.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">   This sample also demonstrates how to use software triggers. Two buffers are used. Once a buffer is filled,</span></div><div class="line"><span class="comment">   the acquisition of the next frame is triggered before processing the received buffer. This approach allows</span></div><div class="line"><span class="comment">   performing image acquisition while the processing of the previous image proceeds.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"><span class="comment">/* Calculates the minimum and maximum gray value. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax);</div><div class="line"></div><div class="line"><span class="preprocessor">#define NUM_GRABS 20          </span><span class="comment">/* Number of images to grab. */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define NUM_BUFFERS 2         </span><span class="comment">/* Number of buffers used for grabbing. */</span><span class="preprocessor"></span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;                        <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevices;                 <span class="comment">/* Number of available devices. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev;                       <span class="comment">/* Handle for the pylon device. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2c3e1f8aa6bfd1a1141f840aae4381a3">PYLON_STREAMGRABBER_HANDLE</a>  hGrabber;                   <span class="comment">/* Handle for the pylon stream grabber. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga99c4b890692bc5a13c032ab58013192c">PYLON_CHUNKPARSER_HANDLE</a>    hChunkParser;               <span class="comment">/* Handle for the parser extracting the chunk data. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a>     hWait;                      <span class="comment">/* Handle used for waiting for a grab to be finished. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      payloadSize;                <span class="comment">/* Size of an image frame in bytes. */</span></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>              *buffers[NUM_BUFFERS];       <span class="comment">/* Buffers used for grabbing. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gad50f3bf650f0859c7e1d70ad12a47f63">PYLON_STREAMBUFFER_HANDLE</a>   bufHandles[NUM_BUFFERS];    <span class="comment">/* Handles for the buffers. */</span></div><div class="line">    <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a>           grabResult;                 <span class="comment">/* Stores the result of a grab operation. */</span></div><div class="line">    <span class="keywordtype">int</span>                         nGrabs;                     <span class="comment">/* Counts the number of buffers grabbed. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      nStreams;                   <span class="comment">/* The number of streams the device provides. */</span></div><div class="line">    _Bool                        isAvail;                    <span class="comment">/* Used for checking feature availability. */</span></div><div class="line">    _Bool                        isReady;                    <span class="comment">/* Used as an output parameter. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      i;                          <span class="comment">/* Counter. */</span></div><div class="line">    <span class="keywordtype">int</span>                         ret=EXIT_FAILURE;           <span class="comment">/* The return value. */</span></div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>*                 triggerSelectorValue = <span class="stringliteral">&quot;FrameStart&quot;</span>; <span class="comment">/* Preselect the trigger for image acquisition. */</span></div><div class="line">    _Bool                        isAvailFrameStart;          <span class="comment">/* Used for checking feature availability. */</span></div><div class="line">    _Bool                        isAvailAcquisitionStart;    <span class="comment">/* Used for checking feature availability. */</span></div><div class="line"></div><div class="line">    hDev = PYLONC_INVALID_HANDLE;</div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Enumerating devices ...\n&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">       PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevices );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( 0 == numDevices )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;No devices found.\n&quot;</span> );</div><div class="line">        <span class="comment">/* Before exiting a program, PylonTerminate() should be called to release</span></div><div class="line"><span class="comment">           all pylon related resources. */</span></div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;Opening first device ...\n&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( 0, &amp;hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for setting</span></div><div class="line"><span class="comment">       parameters and for grabbing images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Set the pixel format to Mono8 if available, where gray values will be output as 8 bit values for each pixel. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Check the available camera trigger mode(s) to select the appropriate one: acquisition start trigger mode (used by previous cameras;</span></div><div class="line"><span class="comment">    do not confuse with acquisition start command) or frame start trigger mode (equivalent to previous acquisition start trigger mode). */</span></div><div class="line">    isAvailAcquisitionStart = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_AcquisitionStart&quot;</span>);</div><div class="line">    isAvailFrameStart = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameStart&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the camera implements the acquisition start trigger mode only. */</span></div><div class="line">    <span class="keywordflow">if</span> (isAvailAcquisitionStart &amp;&amp; !isAvailFrameStart)</div><div class="line">    {</div><div class="line">    <span class="comment">/* ... Select the software trigger as the trigger source. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;On&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        triggerSelectorValue = <span class="stringliteral">&quot;AcquisitionStart&quot;</span>;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Camera may have the acquisition start trigger mode and the frame start trigger mode implemented.</span></div><div class="line"><span class="comment">        In this case, the acquisition trigger mode must be switched off. */</span></div><div class="line">        <span class="keywordflow">if</span> (isAvailAcquisitionStart)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Disable frame burst start trigger if available. */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameBurstStart&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> (isAvail)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameBurstStart&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* To trigger each single frame by software or external hardware trigger: Enable the frame start trigger mode. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;On&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Note: the trigger selector must be set to the appropriate trigger mode</span></div><div class="line"><span class="comment">    before setting the trigger source or issuing software triggers.</span></div><div class="line"><span class="comment">    Frame start trigger mode for newer cameras, acquisition start trigger mode for previous cameras. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, triggerSelectorValue);</div><div class="line"></div><div class="line">    <span class="comment">/* Enable software triggering. */</span></div><div class="line">    <span class="comment">/* ... Select the software trigger as the trigger source. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSource&quot;</span>, <span class="stringliteral">&quot;Software&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* When using software triggering, the Continuous frame mode should be used. Once</span></div><div class="line"><span class="comment">       acquisition is started, the camera sends one image each time a software trigger is</span></div><div class="line"><span class="comment">       issued. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;AcquisitionMode&quot;</span>, <span class="stringliteral">&quot;Continuous&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* For GigE cameras, we recommend increasing the packet size for better</span></div><div class="line"><span class="comment">       performance. When the network adapter supports jumbo frames, set the packet</span></div><div class="line"><span class="comment">       size to a value &gt; 1500, e.g., to 8192. In this sample, we only set the packet size</span></div><div class="line"><span class="comment">       to 1500. */</span></div><div class="line">    <span class="comment">/* ... Check first to see if the GigE camera packet size parameter is supported and if it is writable. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* ... The device supports the packet size feature. Set a value. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, 1500 );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Before enabling individual chunks, the chunk mode in general must be activated. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;ChunkModeActive&quot;</span>) ;</div><div class="line">    <span class="keywordflow">if</span> ( ! isAvail )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;The device doesn&#39;t support the chunk mode.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Activate the chunk mode. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gab566c93ad19a2aa3f0e4ae9589c54c47">PylonDeviceSetBooleanFeature</a>( hDev, <span class="stringliteral">&quot;ChunkModeActive&quot;</span>, 1);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Enable some individual chunks... */</span></div><div class="line"></div><div class="line">    <span class="comment">/* ... The frame counter chunk feature. */</span></div><div class="line">    <span class="comment">/* Is the chunk available? */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_ChunkSelector_Framecounter&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* Select the frame counter chunk feature. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;ChunkSelector&quot;</span>, <span class="stringliteral">&quot;Framecounter&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="comment">/* Can the chunk feature be activated? */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;ChunkEnable&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isAvail )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Activate the chunk feature. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#gab566c93ad19a2aa3f0e4ae9589c54c47">PylonDeviceSetBooleanFeature</a>( hDev, <span class="stringliteral">&quot;ChunkEnable&quot;</span>, 1);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="comment">/* ... The CRC checksum chunk feature. */</span></div><div class="line">    <span class="comment">/*  Note: Enabling the CRC chunk feature is not a prerequisite for using</span></div><div class="line"><span class="comment">        chunks. Chunks can also be handled when the CRC feature is disabled. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_ChunkSelector_PayloadCRC16&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* Select the CRC chunk feature. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;ChunkSelector&quot;</span>, <span class="stringliteral">&quot;PayloadCRC16&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="comment">/* Can the chunk feature be activated? */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;ChunkEnable&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isAvail )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Activate the chunk feature. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#gab566c93ad19a2aa3f0e4ae9589c54c47">PylonDeviceSetBooleanFeature</a>( hDev, <span class="stringliteral">&quot;ChunkEnable&quot;</span>, 1);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* The data block containing the image chunk and the other chunks has a self-descriptive layout.</span></div><div class="line"><span class="comment">       A chunk parser is used to extract the appended chunk data from the grabbed image frame.</span></div><div class="line"><span class="comment">       Create a chunk parser. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaaf8c726b5d979510ad90609c3ea54442">PylonDeviceCreateChunkParser</a>( hDev, &amp;hChunkParser );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( hChunkParser == PYLONC_INVALID_HANDLE )</div><div class="line">    {</div><div class="line">        <span class="comment">/* The transport layer doesn&#39;t provide a chunk parser. */</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;No chunk parser available.\n&quot;</span>);</div><div class="line">        <span class="keywordflow">goto</span> exit;</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Image grabbing is done using a stream grabber.</span></div><div class="line"><span class="comment">       A device may be able to provide different streams. A separate stream grabber must</span></div><div class="line"><span class="comment">       be used for each stream. In this sample, we create a stream grabber for the default</span></div><div class="line"><span class="comment">       stream, i.e., the first stream ( index == 0 ).</span></div><div class="line"><span class="comment">    */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get the number of streams supported by the device and the transport layer. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga9a3ad0ce0576aaff19d7b6f3172ef5b8">PylonDeviceGetNumStreamGrabberChannels</a>( hDev, &amp;nStreams );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( nStreams &lt; 1 )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;The transport layer doesn&#39;t support image streams.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Create and open a stream grabber for the first channel. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga07365e8eb42cbbf992511899023428a2">PylonDeviceGetStreamGrabber</a>( hDev, 0, &amp;hGrabber );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga46fc44105ef8adf7110d3d0fcd51aea3">PylonStreamGrabberOpen</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the stream grabber&#39;s wait object. The wait object</span></div><div class="line"><span class="comment">       allows waiting for buffers to be filled with grabbed data. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga87891dfaee855990f39551d7fcf574c8">PylonStreamGrabberGetWaitObject</a>( hGrabber, &amp;hWait );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Determine the required size of the grab buffer. Since activating chunks will increase the</span></div><div class="line"><span class="comment">       payload size and thus the required buffer size, do this after enabling the chunks. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga24f157b352652e4e031b748160cede56">PylonStreamGrabberGetPayloadSize</a>( hDev, hGrabber, &amp;payloadSize );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Allocate memory for grabbing.  */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        buffers[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) malloc ( payloadSize );</div><div class="line">        <span class="keywordflow">if</span> ( NULL == buffers[i] )</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Out of memory.\n&quot;</span> );</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We must tell the stream grabber the number and size of the buffers</span></div><div class="line"><span class="comment">       we are using. */</span></div><div class="line">    <span class="comment">/* .. We will not use more than NUM_BUFFERS for grabbing. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga95bd2bdbbda3ec1029ff221d063ed81e">PylonStreamGrabberSetMaxNumBuffer</a>( hGrabber, NUM_BUFFERS );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* .. We will not use buffers bigger than payloadSize bytes. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga8eac300db1f6ee57bd3cb9a9ce44e1fd">PylonStreamGrabberSetMaxBufferSize</a>( hGrabber, payloadSize );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*  Allocate the resources required for grabbing. After this, critical parameters</span></div><div class="line"><span class="comment">        that impact the payload size must not be changed until FinishGrab() is called. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa0e2988f96c56e94b39d137009b902de">PylonStreamGrabberPrepareGrab</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Before using the buffers for grabbing, they must be registered at</span></div><div class="line"><span class="comment">    the stream grabber. For each registered buffer, a buffer handle</span></div><div class="line"><span class="comment">    is returned. After registering, these handles are used instead of the</span></div><div class="line"><span class="comment">    raw pointers. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#ga9cf59896fdbc833402259b3c6be9655e">PylonStreamGrabberRegisterBuffer</a>( hGrabber, buffers[i], payloadSize,  &amp;bufHandles[i] );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Feed the buffers into the stream grabber&#39;s input queue. For each buffer, the API</span></div><div class="line"><span class="comment">       allows passing in a pointer to additional context information. This pointer</span></div><div class="line"><span class="comment">       will be returned unchanged when the grab is finished. In our example, we use the index of the</span></div><div class="line"><span class="comment">       buffer as context information. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber, bufHandles[i], (<span class="keywordtype">void</span>*) i );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Start the image acquisition engine. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gad3f7e833b396daf05e44c54f3b951f84">PylonStreamGrabberStartStreamingIfMandatory</a>(hGrabber);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Issue an acquisition start command. Because the trigger mode is enabled, issuing the acquisition start command</span></div><div class="line"><span class="comment">       itself will not trigger any image acquisitions. Issuing the start command simply prepares the camera to acquire images.</span></div><div class="line"><span class="comment">       Once the camera is prepared it will acquire one image for every trigger it receives. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Trigger the first image. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;TriggerSoftware&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Grab NUM_GRABS images */</span></div><div class="line">    nGrabs = 0;                         <span class="comment">/* Counts the number of images grabbed. */</span></div><div class="line">    <span class="keywordflow">while</span> ( nGrabs &lt; NUM_GRABS )</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> bufferIndex;              <span class="comment">/* Index of the buffer. */</span></div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min, max;</div><div class="line">        int32_t chunkWidth = 0; <span class="comment">/* Data retrieved from the chunk parser. */</span></div><div class="line">        int32_t chunkHeight = 0; <span class="comment">/* Data retrieved from the chunk parser. */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Wait for the next buffer to be filled. Wait up to 1000 ms. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga3b7ab1f6e2b1f71418a99fb05418a7c8">PylonWaitObjectWait</a>( hWait, 1000, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Timeout occurred. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Grab timeout occurred.\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>; <span class="comment">/* Stop grabbing. */</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Since the wait operation was successful, the result of at least one grab</span></div><div class="line"><span class="comment">           operation is available. Retrieve it. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber, &amp;grabResult, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Oops. No grab result available? We should never have reached this point.</span></div><div class="line"><span class="comment">               Since the wait operation above returned without a timeout, a grab result</span></div><div class="line"><span class="comment">               should be available. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Failed to retrieve a grab result\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        nGrabs++;</div><div class="line"></div><div class="line">        <span class="comment">/* Trigger the next image. Since we passed more than one buffer to the stream grabber,</span></div><div class="line"><span class="comment">           the triggered image will be grabbed while the image processing is performed.  */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;TriggerSoftware&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Get the buffer index from the context information. */</span></div><div class="line">        bufferIndex = (size_t) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3fa626bc45486a5b8561cbdfd3847ae4">Context</a>;</div><div class="line"></div><div class="line">        <span class="comment">/* Check to see if the image was grabbed successfully. */</span></div><div class="line">        if ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea354b91f0a367f3779da75499a612147a">Grabbed</a> )</div><div class="line">        {</div><div class="line">            <span class="comment">/*  The grab is successfull.  */</span></div><div class="line"></div><div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer;        <span class="comment">/* Pointer to the buffer attached to the grab result. */</span></div><div class="line"></div><div class="line">            <span class="comment">/* Get the buffer pointer from the result structure. Since we also got the buffer index,</span></div><div class="line"><span class="comment">            we could alternatively use buffers[bufferIndex]. */</span></div><div class="line">            buffer = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa24d463aa40da5523491da53b48eeaf1">pBuffer</a>;</div><div class="line"></div><div class="line">            printf(<span class="stringliteral">&quot;Grabbed frame #%2d into buffer %2d.\n&quot;</span>, nGrabs, (<span class="keywordtype">int</span>) bufferIndex );</div><div class="line"></div><div class="line">            <span class="comment">/* Check to see if we really got image data plus chunk data. */</span></div><div class="line">            <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa25e070149bff5b1fc6a0de3c672da09">PayloadType</a> != <a class="code" href="group__pylon.html#ggae045660cc6522c7dcabd1cf0ff24bb86aa8e019409eb7db7dc91bd65498d7cfeb">PayloadType_ChunkData</a> )</div><div class="line">            {</div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Received a buffer not containing chunk data?\n&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <span class="comment">/* Process the chunk data. This is done by passing the grabbed image buffer</span></div><div class="line"><span class="comment">                   to the chunk parser. When the chunk parser has processed the buffer, the chunk</span></div><div class="line"><span class="comment">                   data can be accessed in the same manner as &quot;normal&quot; camera parameters.</span></div><div class="line"><span class="comment">                   The only exception is the CRC feature. There are dedicated functions for</span></div><div class="line"><span class="comment">                   checking the CRC checksum. */</span></div><div class="line"></div><div class="line">                _Bool hasCRC;</div><div class="line"></div><div class="line">                <span class="comment">/* Let the parser extract the data. */</span></div><div class="line">                res = <a class="code" href="group__pylon.html#ga2a53e66be5fba0d25b93b665bd9d6cd6">PylonChunkParserAttachBuffer</a>( hChunkParser, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa24d463aa40da5523491da53b48eeaf1">pBuffer</a>, (<span class="keywordtype">size_t</span>) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a2f8ea337e9d30be53269e73285989024">PayloadSize</a>  );</div><div class="line">                CHECK(res);</div><div class="line"></div><div class="line">                <span class="comment">/* Check the CRC. */</span></div><div class="line">                res = <a class="code" href="group__pylon.html#ga5c56514210b91c184c07ae648d704b88">PylonChunkParserHasCRC</a>( hChunkParser, &amp;hasCRC );</div><div class="line">                CHECK(res);</div><div class="line">                <span class="keywordflow">if</span> ( hasCRC )</div><div class="line">                {</div><div class="line">                    _Bool isOk;</div><div class="line">                    res = <a class="code" href="group__pylon.html#ga8f1e027f014c42b50fdd5662c784b9de">PylonChunkParserCheckCRC</a>( hChunkParser, &amp;isOk );</div><div class="line">                    CHECK(res);</div><div class="line">                    printf(<span class="stringliteral">&quot;Frame %d contains a CRC checksum. The checksum %s ok.\n&quot;</span>, nGrabs, isOk ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line">                }</div><div class="line"></div><div class="line"></div><div class="line">                <span class="comment">/* Retrieve the frame counter value. */</span></div><div class="line">                <span class="comment">/* ... Check the availability. */</span></div><div class="line">                isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;ChunkFramecounter&quot;</span>);</div><div class="line">                printf(<span class="stringliteral">&quot;Frame %d %s a frame counter chunk.\n&quot;</span>, nGrabs, isAvail ? <span class="stringliteral">&quot;contains&quot;</span> : <span class="stringliteral">&quot;doesn&#39;t contain&quot;</span> );</div><div class="line">                <span class="keywordflow">if</span> ( isAvail )</div><div class="line">                {</div><div class="line">                    <span class="comment">/* ... Get the value. */</span></div><div class="line">                    int64_t counter;</div><div class="line">                    res = <a class="code" href="group__pylon.html#gae91b560e639a7ad3182f388c3b57c185">PylonDeviceGetIntegerFeature</a>( hDev, <span class="stringliteral">&quot;ChunkFramecounter&quot;</span>, &amp;counter );</div><div class="line">                    CHECK(res);</div><div class="line"><span class="preprocessor">#if __STDC_VERSION__ &gt;= 199901L || defined(__GNUC__)</span></div><div class="line">                    printf(<span class="stringliteral">&quot;Frame counter of frame %d: %lld.\n&quot;</span>, nGrabs, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) counter );</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">                    printf(<span class="stringliteral">&quot;Frame counter of frame %d: %I64d.\n&quot;</span>, nGrabs, counter );</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="comment">/* Retrieve the frame width value. */</span></div><div class="line">                <span class="comment">/* ... Check the availability. */</span></div><div class="line">                isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;ChunkWidth&quot;</span>);</div><div class="line">                printf(<span class="stringliteral">&quot;Frame %d %s a width chunk.\n&quot;</span>, nGrabs, isAvail ? <span class="stringliteral">&quot;contains&quot;</span> : <span class="stringliteral">&quot;doesn&#39;t contain&quot;</span> );</div><div class="line">                <span class="keywordflow">if</span> ( isAvail )</div><div class="line">                {</div><div class="line">                    <span class="comment">/* ... Get the value. */</span></div><div class="line">                    res = PylonDeviceGetIntegerFeatureInt32( hDev, <span class="stringliteral">&quot;ChunkWidth&quot;</span>, &amp;chunkWidth );</div><div class="line">                    CHECK(res);</div><div class="line">                    printf(<span class="stringliteral">&quot;Width of frame %d: %d.\n&quot;</span>, nGrabs, chunkWidth );</div><div class="line">                }</div><div class="line"></div><div class="line">                <span class="comment">/* Retrieve the frame height value. */</span></div><div class="line">                <span class="comment">/* ... Check the availability. */</span></div><div class="line">                isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;ChunkHeight&quot;</span>);</div><div class="line">                CHECK(res);</div><div class="line">                printf(<span class="stringliteral">&quot;Frame %d %s a height chunk.\n&quot;</span>, nGrabs, isAvail ? <span class="stringliteral">&quot;contains&quot;</span> : <span class="stringliteral">&quot;doesn&#39;t contain&quot;</span> );</div><div class="line">                <span class="keywordflow">if</span> ( isAvail )</div><div class="line">                {</div><div class="line">                    <span class="comment">/* ... Get the value. */</span></div><div class="line">                    res = PylonDeviceGetIntegerFeatureInt32( hDev, <span class="stringliteral">&quot;ChunkHeight&quot;</span>, &amp;chunkHeight );</div><div class="line">                    CHECK(res);</div><div class="line">                    printf(<span class="stringliteral">&quot;Height of frame %d: %d.\n&quot;</span>, nGrabs, chunkHeight );</div><div class="line">                }</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Perform the image processing. */</span></div><div class="line">            getMinMax( buffer, chunkWidth, chunkHeight, &amp;min, &amp;max );</div><div class="line">            printf(<span class="stringliteral">&quot;Min. gray value  = %3u, Max. gray value = %3u\n&quot;</span>, min, max);</div><div class="line"></div><div class="line">            <span class="comment">/* Before requeueing the buffer, you should detach it from the chunk parser. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga2c1dc736e7d3dcb2515b2f70577c625b">PylonChunkParserDetachBuffer</a>( hChunkParser );  <span class="comment">/* The chunk data in the buffer is now no longer accessible. */</span></div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea1f506c828f4945d6b5a7bf71445f7d54">Failed</a> )</div><div class="line">        {</div><div class="line">            fprintf( stderr,  <span class="stringliteral">&quot;Frame %d wasn&#39;t grabbed successfully.  Error code = 0x%08X\n&quot;</span>,</div><div class="line">                nGrabs, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a597c9f0ddc8e7a63df7e108441e9bd78">ErrorCode</a> );</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Once finished with the processing, requeue the buffer to be filled again. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a0dc087840e7dda694c92e8a54ac56838">hBuffer</a>, (<span class="keywordtype">void</span>*) bufferIndex );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. */</span></div><div class="line"></div><div class="line">    <span class="comment">/*  ... Stop the camera. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;AcquisitionStop&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Stop the image acquisition engine. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga7a2d429ce4f61d445f534305efcb3298">PylonStreamGrabberStopStreamingIfMandatory</a>(hGrabber);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... We must issue a flush call to ensure that all pending buffers are put into the</span></div><div class="line"><span class="comment">    stream grabber&#39;s output queue. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa571171cb0805c4d0490caa1413553ae">PylonStreamGrabberFlushBuffersToOutput</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... The buffers can now be retrieved from the stream grabber. */</span></div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber, &amp;grabResult, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">    } <span class="keywordflow">while</span> ( isReady );</div><div class="line"></div><div class="line">    <span class="comment">/* ... When all buffers are retrieved from the stream grabber, they can be deregistered.</span></div><div class="line"><span class="comment">       After deregistering the buffers, it is safe to free the memory. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaa98d52b7c02efc120a7a36b45282b3b0">PylonStreamGrabberDeregisterBuffer</a>( hGrabber, bufHandles[i] );</div><div class="line">        CHECK(res);</div><div class="line">        free( buffers[i] );</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* ... Release grabbing related resources. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gab84d13dc2435c44750259a4bb185319a">PylonStreamGrabberFinishGrab</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* After calling PylonStreamGrabberFinishGrab(), parameters that impact the payload size (e.g.,</span></div><div class="line"><span class="comment">       the AOI width and height parameters) are unlocked and can be modified again. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* ... Close the stream grabber. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga01831a1617fdb98526757ed0e090f9f2">PylonStreamGrabberClose</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Release the chunk parser. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga5a623aaae018e600bf6c7a5fff68dedb">PylonDeviceDestroyChunkParser</a>( hDev, hChunkParser );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    ret = EXIT_SUCCESS;</div><div class="line"></div><div class="line">exit:</div><div class="line"></div><div class="line">    <span class="comment">/*  Disable the software trigger and the chunk mode. */</span></div><div class="line">    <span class="keywordflow">if</span> ( hDev != PYLONC_INVALID_HANDLE )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gab566c93ad19a2aa3f0e4ae9589c54c47">PylonDeviceSetBooleanFeature</a>( hDev, <span class="stringliteral">&quot;ChunkEnable&quot;</span>, 0);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gab566c93ad19a2aa3f0e4ae9589c54c47">PylonDeviceSetBooleanFeature</a>( hDev, <span class="stringliteral">&quot;ChunkModeActive&quot;</span>, 0);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* ... Close and release the pylon device. The stream grabber becomes invalid</span></div><div class="line"><span class="comment">       after closing the pylon device. Don&#39;t call stream grabber related methods after</span></div><div class="line"><span class="comment">       closing or releasing the device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* ... Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">    pressEnterToExit();</div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the more details about the error.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* Simple &quot;image processing&quot; function returning the minimum and maximum gray</span></div><div class="line"><span class="comment">   value of an image with 8 bit gray values. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min = 255;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> max = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> val;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( p = pImg; p &lt; pImg + width * height; p++ )</div><div class="line">    {</div><div class="line">        val = *p;</div><div class="line">        <span class="keywordflow">if</span> ( val &gt; max )</div><div class="line">            max = val;</div><div class="line">        <span class="keywordflow">if</span> ( val &lt; min )</div><div class="line">            min = val;</div><div class="line">    }</div><div class="line">    *pMin = min;</div><div class="line">    *pMax = max;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_events"></a>
Events Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">Basler GigE Vision, IEEE 1394, and Camera Link cameras can send event messages. For example, when a sensor</span></div><div class="line"><span class="comment">exposure has finished, the camera can send an end-of-exposure event to the PC. The event</span></div><div class="line"><span class="comment">can be received by the PC before the image data for the finished exposure has been completely</span></div><div class="line"><span class="comment">transferred. This sample illustrates the retrieving and processing of event messages.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">Receiving events is very similar to grabbing images. An event grabber provides a wait object that</span></div><div class="line"><span class="comment">is signalled when an event message is available. When an event message is available, it can be</span></div><div class="line"><span class="comment">retrieved from the event grabber. In contrast to grabbing images, memory buffers for receiving</span></div><div class="line"><span class="comment">events need not be provided by the application. Memory buffers to store event messages are organized</span></div><div class="line"><span class="comment">by the event grabber itself.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">The specific layout of event messages depends on the event type and the camera type. The pylon API</span></div><div class="line"><span class="comment">uses GenICam support for parsing event messages. This means that the message layout is described in the</span></div><div class="line"><span class="comment">camera&#39;s XML description file. A GenApi node map is created from the XML camera description file.</span></div><div class="line"><span class="comment">This node map contains node objects representing the elements of the XML file. Since the layout of event</span></div><div class="line"><span class="comment">messages is described in the camera description file, the information carried by the event messages is</span></div><div class="line"><span class="comment">exposed as nodes in the node map and can be accessed like &quot;normal&quot; camera parameters.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">You can register callback functions that are fired when a parameter has been changed. To be</span></div><div class="line"><span class="comment">informed that a received event message contains a specific event, a callback must be registered for</span></div><div class="line"><span class="comment">the parameter(s) associated with the event.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">These mechanisms are demonstrated with the end-of-exposure event. The event carries the following</span></div><div class="line"><span class="comment">information:</span></div><div class="line"><span class="comment">* ExposureEndEventFrameID: indicates the number of the image frame that has been exposed.</span></div><div class="line"><span class="comment">* ExposureEndEventTimestamp: indicates the moment when the event has been generated.</span></div><div class="line"><span class="comment">* ExposureEndEventStreamChannelIndex: indicates the number of the image data stream used to</span></div><div class="line"><span class="comment">transfer the exposed frame.</span></div><div class="line"><span class="comment">A callback for the ExposureEndEventFrameID will be registered as an indicator for the arrival</span></div><div class="line"><span class="comment">of an end-of-exposure event.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"><span class="comment">/* Calculates the minimum and maximum gray value. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax);</div><div class="line"></div><div class="line"><span class="comment">/* The function to be fired when an end of exposure event has been received. */</span></div><div class="line"><span class="keywordtype">void</span> GENAPIC_CC endOfExposureCallback( <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a> hNode );</div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#define NUM_GRABS 100          </span><span class="comment">/* Number of images to grab. */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define NUM_IMAGE_BUFFERS 5   </span><span class="comment">/* Number of buffers used for grabbing. */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define NUM_EVENT_BUFFERS 20  </span><span class="comment">/* Number of buffers used for grabbing. */</span><span class="preprocessor"></span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;                      <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevices;               <span class="comment">/* Number of available devices. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev;                     <span class="comment">/* Handle for the pylon device. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2c3e1f8aa6bfd1a1141f840aae4381a3">PYLON_STREAMGRABBER_HANDLE</a>  hStreamGrabber;           <span class="comment">/* Handle for the pylon stream grabber. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga4cc77099a5a0f344c54dabf6ccc869a9">PYLON_EVENTGRABBER_HANDLE</a>   hEventGrabber;            <span class="comment">/* Handle for the event grabber used for receiving events. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga67adadd3f33d8ffc98fa8821aef6bb5c">PYLON_EVENTADAPTER_HANDLE</a>   hEventAdapter;            <span class="comment">/* Handle for the event adapter used for dispatching events. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a>     hWaitStream;              <span class="comment">/* Handle used for waiting for a grab to be finished. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a>     hWaitEvent;               <span class="comment">/* Handle used for waiting for an event message. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga0d7504543e64485cafb24eeb77c9da77">PYLON_WAITOBJECTS_HANDLE</a>    hWaitObjects;             <span class="comment">/* Container allowing waiting for multiple wait objects. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>              hNodeMap;                 <span class="comment">/* Handle for the node map containing the</span></div><div class="line"><span class="comment">                                                             camera parameters. */</span></div><div class="line">    <a class="code" href="group__genapi.html#gae8c685cdd380b679bdb822e4d7b5461c">NODE_CALLBACK_HANDLE</a>        hCallback;                <span class="comment">/* Used for deregistering a callback function. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>                 hNode;                    <span class="comment">/* Handle for a camera parameter. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      payloadSize;              <span class="comment">/* Size of an image in bytes. */</span></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>              *buffers[NUM_IMAGE_BUFFERS];     <span class="comment">/* Buffers used for grabbing. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gad50f3bf650f0859c7e1d70ad12a47f63">PYLON_STREAMBUFFER_HANDLE</a>   bufHandles[NUM_IMAGE_BUFFERS];  <span class="comment">/* Handles for the buffers. */</span></div><div class="line">    <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a>           grabResult;               <span class="comment">/* Stores the result of a grab operation. */</span></div><div class="line">    <span class="keywordtype">int</span>                         nGrabs;                   <span class="comment">/* Counts the number of buffers grabbed. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      nStreams;                 <span class="comment">/* The number of streams the device provides. */</span></div><div class="line">    _Bool                       isAvail;                  <span class="comment">/* Used for checking feature availability. */</span></div><div class="line">    _Bool                       isReady;                  <span class="comment">/* Used as an output parameter. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      i;                        <span class="comment">/* Counter. */</span></div><div class="line">    int32_t                     sfncVersionMajor;         <span class="comment">/* The major number of the Standard Feature Naming Convention (SFNC)</span></div><div class="line"><span class="comment">                                                             version used by the camera device. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevices );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( 0 == numDevices )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;No devices found.\n&quot;</span> );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( 0, &amp;hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for settig</span></div><div class="line"><span class="comment">       parameters, for grabbing images, and for grabbing events. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM | PYLONC_ACCESS_MODE_EVENT );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> buf[256];</div><div class="line">        <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">        _Bool isReadable;</div><div class="line"></div><div class="line">        isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isReadable )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz );</div><div class="line">            CHECK(res);</div><div class="line">            printf(<span class="stringliteral">&quot;Using camera %s\n&quot;</span>, buf);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Set the pixel format to Mono8 if available, where gray values will be output as 8 bit values for each pixel. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable acquisition start trigger if available */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_AcquisitionStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable frame burst start trigger if available. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameBurstStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameBurstStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable frame start trigger if available */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We will use the Continuous frame mode, i.e., the camera delivers</span></div><div class="line"><span class="comment">    images continuously. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;AcquisitionMode&quot;</span>, <span class="stringliteral">&quot;Continuous&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* For GigE cameras, we recommend increasing the packet size for better</span></div><div class="line"><span class="comment">       performance. If the network adapter supports jumbo frames, set the packet</span></div><div class="line"><span class="comment">       size to a value &gt; 1500, e.g., to 8192. In this sample, we only set the packet size</span></div><div class="line"><span class="comment">       to 1500. */</span></div><div class="line">    <span class="comment">/* ... Check first to see if the GigE camera packet size parameter is supported and if it is writable. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* ... The device supports the packet size feature, set a value. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, 1500 );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;EventSelector&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( !isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* Feature is not available. */</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Device doesn&#39;t support events.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Determine the major number of the SFNC version used by the camera device. */</span></div><div class="line">    <span class="keywordflow">if</span> ( PylonDeviceGetIntegerFeatureInt32( hDev, <span class="stringliteral">&quot;DeviceSFNCVersionMajor&quot;</span>, &amp;sfncVersionMajor ) != <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a> )</div><div class="line">    {</div><div class="line">        <span class="comment">/* No SFNC version information is provided by the camera device. */</span></div><div class="line">        sfncVersionMajor = 0;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Enable camera event reporting. */</span></div><div class="line">    <span class="comment">/* Select the end-of-exposure event reporting. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;EventSelector&quot;</span>, <span class="stringliteral">&quot;ExposureEnd&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* Enable the event reporting.</span></div><div class="line"><span class="comment">    Select the enumeration entry name depending on the SFNC version used by the camera device.</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keywordflow">if</span> ( sfncVersionMajor &gt;= 2 )</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;EventNotification&quot;</span>, <span class="stringliteral">&quot;On&quot;</span> );</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;EventNotification&quot;</span>, <span class="stringliteral">&quot;GenICamEvent&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Image grabbing is done using a stream grabber.</span></div><div class="line"><span class="comment">    A device may be able to provide different streams. A separate stream grabber must</span></div><div class="line"><span class="comment">    be used for each stream. In this sample, we create a stream grabber for the default</span></div><div class="line"><span class="comment">    stream, i.e., the first stream ( index == 0 ).</span></div><div class="line"><span class="comment">    */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get the number of streams supported by the device and the transport layer. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga9a3ad0ce0576aaff19d7b6f3172ef5b8">PylonDeviceGetNumStreamGrabberChannels</a>( hDev, &amp;nStreams );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( nStreams &lt; 1 )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;The transport layer doesn&#39;t support image streams\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Create and open a stream grabber for the first channel. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga07365e8eb42cbbf992511899023428a2">PylonDeviceGetStreamGrabber</a>( hDev, 0, &amp;hStreamGrabber );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga46fc44105ef8adf7110d3d0fcd51aea3">PylonStreamGrabberOpen</a>( hStreamGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the stream grabber&#39;s wait object. The wait object</span></div><div class="line"><span class="comment">    allows waiting for buffers to be grabbed. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga87891dfaee855990f39551d7fcf574c8">PylonStreamGrabberGetWaitObject</a>( hStreamGrabber, &amp;hWaitStream );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    res = <a class="code" href="group__pylon.html#ga24f157b352652e4e031b748160cede56">PylonStreamGrabberGetPayloadSize</a>( hDev, hStreamGrabber, &amp;payloadSize );</div><div class="line">    CHECK( res );</div><div class="line"></div><div class="line">    <span class="comment">/* Allocate memory for grabbing.  */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_IMAGE_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        buffers[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) malloc ( payloadSize );</div><div class="line">        <span class="keywordflow">if</span> ( NULL == buffers[i] )</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Out of memory!\n&quot;</span> );</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We must tell the stream grabber the number and size of the buffers</span></div><div class="line"><span class="comment">    we are using. */</span></div><div class="line">    <span class="comment">/* .. We will not use more than NUM_BUFFERS for grabbing. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga95bd2bdbbda3ec1029ff221d063ed81e">PylonStreamGrabberSetMaxNumBuffer</a>( hStreamGrabber, NUM_IMAGE_BUFFERS );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* .. We will not use buffers bigger than payloadSize bytes. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga8eac300db1f6ee57bd3cb9a9ce44e1fd">PylonStreamGrabberSetMaxBufferSize</a>( hStreamGrabber, payloadSize );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*  Allocate the resources required for grabbing. After this, critical parameters</span></div><div class="line"><span class="comment">    that impact the payload size must not be changed until FinishGrab() is called. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa0e2988f96c56e94b39d137009b902de">PylonStreamGrabberPrepareGrab</a>( hStreamGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Before using the buffers for grabbing, they must be registered at</span></div><div class="line"><span class="comment">    the stream grabber. For each registered buffer, a buffer handle</span></div><div class="line"><span class="comment">    is returned. After registering, these handles are used instead of the</span></div><div class="line"><span class="comment">    raw pointers. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_IMAGE_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#ga9cf59896fdbc833402259b3c6be9655e">PylonStreamGrabberRegisterBuffer</a>( hStreamGrabber, buffers[i], payloadSize,  &amp;bufHandles[i] );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Feed the buffers into the stream grabber&#39;s input queue. For each buffer, the API</span></div><div class="line"><span class="comment">    allows passing in a pointer to additional context information. This pointer</span></div><div class="line"><span class="comment">    will be returned unchanged when the grab is finished. In our example, we use the index of the</span></div><div class="line"><span class="comment">    buffer as context information. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_IMAGE_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hStreamGrabber, bufHandles[i], (<span class="keywordtype">void</span>*) i );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* The stream grabber is now prepared. As soon as the camera starts to acquire images,</span></div><div class="line"><span class="comment">    the image data will be grabbed into the provided buffers.  */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Create and prepare an event grabber. */</span></div><div class="line">    <span class="comment">/* ... Get a handle for the event grabber. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gad3969200f1e526b69c2e84c4dcd71e7f">PylonDeviceGetEventGrabber</a>( hDev, &amp;hEventGrabber );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( hEventGrabber == PYLONC_INVALID_HANDLE )</div><div class="line">    {</div><div class="line">        <span class="comment">/* The transport layer doesn&#39;t support event grabbers. */</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;No event grabber supported.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* ... Tell the grabber how many buffers to use. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaca16fe8c54dc4fbebee0932b42869e42">PylonEventGrabberSetNumBuffers</a>( hEventGrabber, NUM_EVENT_BUFFERS );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Open the event grabber. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga7834df8107cf7116c9b46db04f9953e7">PylonEventGrabberOpen</a>( hEventGrabber );  <span class="comment">/* The event grabber is now ready</span></div><div class="line"><span class="comment">                                                   for receiving events. */</span></div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the wait object that is associated with the event grabber. The event</span></div><div class="line"><span class="comment">    will be signaled when an event message has been received. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6bc0e00806922b1053e4ce428173dcd4">PylonEventGrabberGetWaitObject</a>( hEventGrabber, &amp;hWaitEvent );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* For extracting the event data from an event message, an event adapter is used. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga1dafaf6831e3cf292757590b6975b069">PylonDeviceCreateEventAdapter</a>( hDev, &amp;hEventAdapter );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( hEventAdapter == PYLONC_INVALID_HANDLE )</div><div class="line">    {</div><div class="line">        <span class="comment">/* The transport layer doesn&#39;t support event grabbers. */</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;No event adapter supported.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Register the callback function for ExposureEndEventFrameID parameter. */</span></div><div class="line">    <span class="comment">/*... Get the node map containing all parameters. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>( hDev, &amp;hNodeMap );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* Get the ExposureEndEventFrameID parameter.</span></div><div class="line"><span class="comment">    Select the parameter name depending on the SFNC version used by the camera device.</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keywordflow">if</span> ( sfncVersionMajor &gt;= 2 )</div><div class="line">        res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>( hNodeMap, <span class="stringliteral">&quot;EventExposureEndFrameID&quot;</span>, &amp;hNode );</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>( hNodeMap, <span class="stringliteral">&quot;ExposureEndEventFrameID&quot;</span>, &amp;hNode );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode )</div><div class="line">    {</div><div class="line">        <span class="comment">/* There is no ExposureEndEventFrameID parameter. */</span></div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;There is no ExposureEndEventFrameID or EventExposureEndFrameID parameter.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* ... Register the callback function. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga0c20a5329a48f950d9459acdb8e775c8">GenApiNodeRegisterCallback</a>( hNode, endOfExposureCallback, &amp;hCallback );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Put the wait objects into a container. */</span></div><div class="line">    <span class="comment">/* ... Create the container. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga353472a82bfd5779376c28d32844227a">PylonWaitObjectsCreate</a>( &amp;hWaitObjects );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* ... Add the wait objects&#39; handles. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga0f780d671614a6866865d881b1e6bb38">PylonWaitObjectsAddMany</a>( hWaitObjects, 2, hWaitEvent, hWaitStream);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Start the image acquisition engine. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gad3f7e833b396daf05e44c54f3b951f84">PylonStreamGrabberStartStreamingIfMandatory</a>(hStreamGrabber);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Let the camera acquire images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Grab NUM_GRABS images. */</span></div><div class="line">    nGrabs = 0;                         <span class="comment">/* Counts the number of images grabbed. */</span></div><div class="line">    <span class="keywordflow">while</span> ( nGrabs &lt; NUM_GRABS )</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> bufferIndex;              <span class="comment">/* Index of the buffer. */</span></div><div class="line">        <span class="keywordtype">size_t</span> waitObjectIndex;          <span class="comment">/* Index of the wait object that is signalled.*/</span></div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min, max;</div><div class="line"></div><div class="line">        <span class="comment">/* Wait for either an image buffer grabbed or an event received. Wait up to 1000 ms. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga3650b45e8e45fd56f9775abb485f4e4a">PylonWaitObjectsWaitForAny</a>( hWaitObjects, 1000, &amp;waitObjectIndex, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Timeout occurred. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Timeout. Neither grabbed an image nor received an event.\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>; <span class="comment">/* Stop grabbing. */</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ( 0 == waitObjectIndex )</div><div class="line">        {</div><div class="line">            <a class="code" href="struct_pylon_event_result__t.html">PylonEventResult_t</a> eventMsg;</div><div class="line">            <span class="comment">/* hWaitEvent has been signalled. At least one event message is available. Retrieve it. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga38f586fc7aa2e9cda46a6050fd235326">PylonEventGrabberRetrieveEvent</a>( hEventGrabber, &amp;eventMsg, &amp;isReady );</div><div class="line">            CHECK(res);</div><div class="line">            <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Oops. No event message available? We should never have reached this point.</span></div><div class="line"><span class="comment">                Since the wait operation above returned without a timeout, an event message</span></div><div class="line"><span class="comment">                should be available. */</span></div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Failed to retrieve an event\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line">            <span class="comment">/* Check to see if the event was successfully received. */</span></div><div class="line">            <span class="keywordflow">if</span> ( 0 == eventMsg.<a class="code" href="struct_pylon_event_result__t.html#ad7fa25f406eda20ec22679caf86a6fb8">ErrorCode</a> )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Successfully received an event message. */</span></div><div class="line">                <span class="comment">/* Pass the event message to the event adapter. The event adapter will</span></div><div class="line"><span class="comment">                update the parameters related to events and will fire the callbacks</span></div><div class="line"><span class="comment">                registered to event related parameters. */</span></div><div class="line">                res = <a class="code" href="group__pylon.html#ga23da44807ae787519a62ceccd4c53061">PylonEventAdapterDeliverMessage</a>( hEventAdapter, &amp;eventMsg );</div><div class="line">                CHECK(res);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Error when receiving an event: 0x%08x\n&quot;</span>, eventMsg.<a class="code" href="struct_pylon_event_result__t.html#ad7fa25f406eda20ec22679caf86a6fb8">ErrorCode</a> );</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( 1 == waitObjectIndex )</div><div class="line">        {</div><div class="line">            <span class="comment">/* hWaitStream has been signalled. The result of at least one grab</span></div><div class="line"><span class="comment">            operation is available. Retrieve it. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hStreamGrabber, &amp;grabResult, &amp;isReady );</div><div class="line">            CHECK(res);</div><div class="line">            <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Oops. No grab result available? We should never have reached this point.</span></div><div class="line"><span class="comment">                Since the wait operation above returned without a timeout, a grab result</span></div><div class="line"><span class="comment">                should be available. */</span></div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Failed to retrieve a grab result\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            nGrabs++;</div><div class="line"></div><div class="line">            <span class="comment">/* Get the buffer index from the context information. */</span></div><div class="line">            bufferIndex = (size_t) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3fa626bc45486a5b8561cbdfd3847ae4">Context</a>;</div><div class="line"></div><div class="line">            <span class="comment">/* Check to see if the image was grabbed successfully. */</span></div><div class="line">            if ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea354b91f0a367f3779da75499a612147a">Grabbed</a> )</div><div class="line">            {</div><div class="line">                <span class="comment">/*  Success. Perform image processing. Since we passed more than one buffer</span></div><div class="line"><span class="comment">                to the stream grabber, the remaining buffers are filled while</span></div><div class="line"><span class="comment">                we do the image processing. The processed buffer won&#39;t be touched by</span></div><div class="line"><span class="comment">                the stream grabber until we pass it back to the stream grabber. */</span></div><div class="line"></div><div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer;        <span class="comment">/* Pointer to the buffer attached to the grab result. */</span></div><div class="line"></div><div class="line">                <span class="comment">/* Get the buffer pointer from the result structure. Since we also got the buffer index,</span></div><div class="line"><span class="comment">                we could alternatively use buffers[bufferIndex]. */</span></div><div class="line">                buffer = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa24d463aa40da5523491da53b48eeaf1">pBuffer</a>;</div><div class="line"></div><div class="line"></div><div class="line">                getMinMax( buffer, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a5de217563769a2fecc939a8803c0de49">SizeX</a>, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#ac53ad1519fff771ec8810fb5ffea222d">SizeY</a>, &amp;min, &amp;max );</div><div class="line">                printf(<span class="stringliteral">&quot;Grabbed frame #%2d into buffer %2d. Min. gray value = %3u, Max. gray value = %3u\n&quot;</span>,</div><div class="line">                    nGrabs, (<span class="keywordtype">int</span>)bufferIndex, min, max);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea1f506c828f4945d6b5a7bf71445f7d54">Failed</a> )</div><div class="line">            {</div><div class="line">                fprintf( stderr,  <span class="stringliteral">&quot;Frame %d wasn&#39;t grabbed successfully.  Error code = 0x%08X\n&quot;</span>,</div><div class="line">                    nGrabs, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a597c9f0ddc8e7a63df7e108441e9bd78">ErrorCode</a> );</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Once finished with the processing, requeue the buffer to be filled again. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hStreamGrabber, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a0dc087840e7dda694c92e8a54ac56838">hBuffer</a>, (<span class="keywordtype">void</span>*) bufferIndex );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. */</span></div><div class="line"></div><div class="line">    <span class="comment">/*  ... Stop the camera. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;AcquisitionStop&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Stop the image acquisition engine. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga7a2d429ce4f61d445f534305efcb3298">PylonStreamGrabberStopStreamingIfMandatory</a>(hStreamGrabber);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Switch-off the events. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;EventSelector&quot;</span>, <span class="stringliteral">&quot;ExposureEnd&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;EventNotification&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* ... We must issue a flush call to ensure that all pending buffers are put into the</span></div><div class="line"><span class="comment">    stream grabber&#39;s output queue. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa571171cb0805c4d0490caa1413553ae">PylonStreamGrabberFlushBuffersToOutput</a>( hStreamGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... The buffers can now be retrieved from the stream grabber. */</span></div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hStreamGrabber, &amp;grabResult, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">    } <span class="keywordflow">while</span> ( isReady );</div><div class="line"></div><div class="line">    <span class="comment">/* ... When all buffers are retrieved from the stream grabber, they can be deregistered.</span></div><div class="line"><span class="comment">    After deregistering the buffers, it is safe to free the memory. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_IMAGE_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaa98d52b7c02efc120a7a36b45282b3b0">PylonStreamGrabberDeregisterBuffer</a>( hStreamGrabber, bufHandles[i] );</div><div class="line">        CHECK(res);</div><div class="line">        free( buffers[i] );</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* ... Release grabbing related resources. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gab84d13dc2435c44750259a4bb185319a">PylonStreamGrabberFinishGrab</a>( hStreamGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* After calling PylonStreamGrabberFinishGrab(), parameters that impact the payload size (e.g.,</span></div><div class="line"><span class="comment">    the AOI width and height parameters) are unlocked and can be modified again. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* ... Close the stream grabber. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga01831a1617fdb98526757ed0e090f9f2">PylonStreamGrabberClose</a>( hStreamGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Deregister the callback. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#gaed1aeeddf96dd7e0ab8dd29f0fdc174c">GenApiNodeDeregisterCallback</a>( hNode, hCallback );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Close the event grabber.*/</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga77f7b0a9255e8b5f505e149cec5cd2a1">PylonEventGrabberClose</a>( hEventGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Release the event adapter. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaac18632f3379948ef88c1c38836fc9a9">PylonDeviceDestroyEventAdapter</a>( hDev, hEventAdapter );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Release the wait object container. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gacc38d5a8d53dc1b3bd4764727d31e6f1">PylonWaitObjectsDestroy</a>( hWaitObjects );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* ... Close and release the pylon device. The stream grabber becomes invalid</span></div><div class="line"><span class="comment">    after closing the pylon device. Don&#39;t call stream grabber related methods after</span></div><div class="line"><span class="comment">    closing or releasing the device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* ... Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">    calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve more details about the error</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Simple &quot;image processing&quot; function returning the minumum and maximum gray</span></div><div class="line"><span class="comment">value of an 8 bit gray value image. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min = 255;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> max = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> val;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( p = pImg; p &lt; pImg + width * height; p++ )</div><div class="line">    {</div><div class="line">        val = *p;</div><div class="line">        <span class="keywordflow">if</span> ( val &gt; max )</div><div class="line">            max = val;</div><div class="line">        <span class="keywordflow">if</span> ( val &lt; min )</div><div class="line">            min = val;</div><div class="line">    }</div><div class="line">    *pMin = min;</div><div class="line">    *pMax = max;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* Callback will be fired when an event message contains an end-of-exposure event. */</span></div><div class="line"><span class="keywordtype">void</span> GENAPIC_CC endOfExposureCallback( <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a> hNode )</div><div class="line">{</div><div class="line">    int64_t frame;</div><div class="line">    GENAPIC_RESULT res;</div><div class="line">    res = <a class="code" href="group__genapi.html#ga20bf17967c93dfb9fe63abec04423bd0">GenApiIntegerGetValue</a>( hNode, &amp;frame );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"><span class="preprocessor">#if __STDC_VERSION__ &gt;= 199901L || defined(__GNUC__)</span></div><div class="line">    printf(<span class="stringliteral">&quot;Got end-of-exposure event. Frame number: %lld\n&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) frame );</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    printf(<span class="stringliteral">&quot;Got end-of-exposure event. Frame number: %I64d\n&quot;</span>, frame );</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_genapiparam"></a>
GenApiParam Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  This sample illustrates how to access the different camera</span></div><div class="line"><span class="comment">  parameter types. It uses the low-level functions provided by GenApiC</span></div><div class="line"><span class="comment">  instead of those provided by pylonC.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define STRING_BUFFER_SIZE  512</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK(errc) if (GENAPI_E_OK != errc) printErrorAndExit(errc)</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">printErrorAndExit(GENAPIC_RESULT errc)</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>(NULL, &amp;length);</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc(length);</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>(errMsg, &amp;length);</div><div class="line"></div><div class="line">    fprintf(stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free(errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve more details about the error</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>(NULL, &amp;length);</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc(length);</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>(errMsg, &amp;length);</div><div class="line"></div><div class="line">    fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free(errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">SetMigrationModeEnable(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>  hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>     hNode;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>      *pFeatureName = <span class="stringliteral">&quot;MigrationModeEnable&quot;</span>;   <span class="comment">/* The name of the feature. */</span></div><div class="line">    _Bool           value, bval;                            <span class="comment">/* The value of the feature. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a> nodeType;</div><div class="line">    GENAPIC_RESULT  res;</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gad12c9521b848016cb6cc5b48453701c2">PylonDeviceGetTLNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, pFeatureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;There is no feature named %s.\n&quot;</span>, pFeatureName );</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want a boolean feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fae5123b03d8d85a6f9503df0fc0e5de5b">BooleanNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not a boolean feature.&quot;</span>, pFeatureName );</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the feature is readable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Retrieve the current state of the feature. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga42f52ad1149bb050e52e918e5b9cd166">GenApiBooleanGetValue</a>(hNode, &amp;value);</div><div class="line">        CHECK(res);</div><div class="line">        fprintf( stdout, <span class="stringliteral">&quot;The &#39;%s&#39; feature is %s.&quot;</span>, pFeatureName, value ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span> );</div><div class="line"></div><div class="line">        <span class="comment">/* Set a new value. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hNode, &amp;bval);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (bval)</div><div class="line">        {</div><div class="line">            value = 1;  <span class="comment">/* New value to turn feature on. */</span></div><div class="line">            fprintf( stdout, <span class="stringliteral">&quot;Switching the %s feature %s.\n&quot;</span>, pFeatureName, value ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span>);</div><div class="line">            res = <a class="code" href="group__genapi.html#ga209215d9a0073b004da8c07992f2d6e2">GenApiBooleanSetValue</a>(hNode, value);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Cannot set value for feature &#39;%s&#39; - node not writable.\n&quot;</span>, pFeatureName );</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable.\n&quot;</span>, pFeatureName );</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to check the presence, readability, and writability</span></div><div class="line"><span class="comment">   of a feature. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateAccessibilityCheck(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>          * pFeatureName;</div><div class="line">    _Bool                val, val_read, val_write;</div><div class="line">    GENAPIC_RESULT      res;</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if a feature is implemented at all. The &#39;Width&#39; feature is likely to</span></div><div class="line"><span class="comment">    be implemented by just about every existing camera. */</span></div><div class="line">    pFeatureName = <span class="stringliteral">&quot;Width&quot;</span>;</div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, pFeatureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> != hNode)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Node exists, check whether feature is implemented. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga8e997a41e0c6dc619c007d2096e13593">GenApiNodeIsImplemented</a>(hNode, &amp;val);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Node does not exist --&gt; feature is not implemented. */</span></div><div class="line">        val = 0;</div><div class="line">    }</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;%s&#39; feature %s implemented\n&quot;</span>, pFeatureName, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* This feature most likely does not exist */</span></div><div class="line">    pFeatureName = <span class="stringliteral">&quot;Weirdness&quot;</span>;</div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, pFeatureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> != hNode)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Node exists, check whether feature is implemented. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga8e997a41e0c6dc619c007d2096e13593">GenApiNodeIsImplemented</a>(hNode, &amp;val);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Node does not exist --&gt; feature is not implemented. */</span></div><div class="line">        val = 0;</div><div class="line">    }</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;%s&#39; feature %s implemented\n&quot;</span>, pFeatureName, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Although a feature is implemented by the device, it may not be available</span></div><div class="line"><span class="comment">       with the device in its current state. Check to see if the feature is currently</span></div><div class="line"><span class="comment">       available. The GenApiNodeIsAvailable sets val to 0 if either the feature</span></div><div class="line"><span class="comment">       is not implemented or if the feature is not currently available. */</span></div><div class="line">    pFeatureName = <span class="stringliteral">&quot;BinningVertical&quot;</span>;</div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, pFeatureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> != hNode)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Node exists, check whether feature is available. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga1939aeb73e04f1631e0fbc4e81d5f66c">GenApiNodeIsAvailable</a>(hNode, &amp;val);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Node does not exist --&gt; feature is not implemented, and hence not available. */</span></div><div class="line">        val = 0;</div><div class="line">    }</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;%s&#39; feature %s available\n&quot;</span>, pFeatureName, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* If a feature is available, it could be read-only, write-only, or both</span></div><div class="line"><span class="comment">       readable and writable. Use the GenApiNodeIsReadable() and the</span></div><div class="line"><span class="comment">       GenApiNodeIsReadable() functions(). It is safe to call these functions</span></div><div class="line"><span class="comment">       for features that are currently not available or not implemented by the device.</span></div><div class="line"><span class="comment">       A feature that is not available or not implemented is neither readable nor writable.</span></div><div class="line"><span class="comment">       The readability and writability of a feature can change depending on the current</span></div><div class="line"><span class="comment">       state of the device. For example, the Width parameter might not be writable when</span></div><div class="line"><span class="comment">       the camera is acquiring images. */</span></div><div class="line"></div><div class="line">    pFeatureName = <span class="stringliteral">&quot;Width&quot;</span>;</div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, pFeatureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> != hNode)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Node exists, check whether feature is readable. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;val_read);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;val_write);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Node does not exist --&gt; feature is neither readable nor witable. */</span></div><div class="line">        val_read = val_write = 0;</div><div class="line">    }</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;%s&#39; feature %s readable\n&quot;</span>, pFeatureName, val_read ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;%s&#39; feature %s writable\n&quot;</span>, pFeatureName, val_write ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to handle integer camera parameters. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateIntFeature(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Width&quot;</span>;  <span class="comment">/* Name of the feature used in this sample: AOI Width. */</span></div><div class="line">    int64_t             val, min, max, incr;      <span class="comment">/* Properties of the feature. */</span></div><div class="line">    GENAPIC_RESULT      res;                      <span class="comment">/* Return value. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    _Bool                bval;</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, featureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want an integer feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fa1da780bf3139bd8e8c1415edf109f2fe">IntegerNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not an integer feature\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">       Query the current value, the range of allowed values, and the increment of the feature.</span></div><div class="line"><span class="comment">       For some integer features, you are not allowed to set every value within the</span></div><div class="line"><span class="comment">       value range. For example, for some cameras the Width parameter must be a multiple</span></div><div class="line"><span class="comment">       of 2. These constraints are expressed by the increment value. Valid values</span></div><div class="line"><span class="comment">       follow the rule: val &gt;= min &amp;&amp; val &lt;= max &amp;&amp; val == min + n * inc.</span></div><div class="line"><span class="comment">    */</span></div><div class="line"></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__genapi.html#gacc9955c1df6daeaf6f9a5d079e019785">GenApiIntegerGetMin</a>(hNode, &amp;min);       <span class="comment">/* Get the minimum value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga0282fe15bd20ae5067ce0f2dac93c04d">GenApiIntegerGetMax</a>(hNode, &amp;max);       <span class="comment">/* Get the maximum value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#gacb7dd1eee58c4b822b9501913d255c64">GenApiIntegerGetInc</a>(hNode, &amp;incr);       <span class="comment">/* Get the increment value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga20bf17967c93dfb9fe63abec04423bd0">GenApiIntegerGetValue</a>(hNode, &amp;val);     <span class="comment">/* Get the current value. */</span></div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"><span class="preprocessor">#if __STDC_VERSION__ &gt;= 199901L || defined(__GNUC__)</span></div><div class="line">        printf(<span class="stringliteral">&quot;%s: min= %lld  max= %lld  incr=%lld  Value=%lld\n&quot;</span>, featureName, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) min, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) max, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) incr, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>) val);</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">        printf(<span class="stringliteral">&quot;%s: min= %I64d  max= %I64d  incr=%I64d  Value=%I64d\n&quot;</span>, featureName, min, max, incr, val);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        res = <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hNode, &amp;bval);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (bval)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Set the Width half-way between minimum and maximum. */</span></div><div class="line">            res = <a class="code" href="group__genapi.html#gac50b79c0b5285b9552966fa7049c1d81">GenApiIntegerSetValue</a>(hNode, min + (max - min) / incr / 2 * incr);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Cannot set value for feature &#39;%s&#39; - node not writable\n&quot;</span>, featureName);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable\n&quot;</span>, featureName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Some features involve floating point parameters. This function illustrates how to set and get floating</span></div><div class="line"><span class="comment">   point parameters. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateFloatFeature(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Gamma&quot;</span>;  <span class="comment">/* The name of the feature used. */</span></div><div class="line">    _Bool                bval;                     <span class="comment">/* Is the feature available? */</span></div><div class="line">    <span class="keywordtype">double</span>              min, max, value;          <span class="comment">/* Value range and current value. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    GENAPIC_RESULT      res;                      <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, featureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want a float feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685faa608d6ab0df3a7f13f64a5354f16f31c">FloatNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not an floating-point feature\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Query the value range and the current value. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga4184995719841d234bf57f73e911bc1e">GenApiFloatGetMin</a>(hNode, &amp;min);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga9f2a4ca2c9870e0180994d8e59dcbfa7">GenApiFloatGetMax</a>(hNode, &amp;max);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#gaeedfee7fab234ff136cec625336e4e95">GenApiFloatGetValue</a>(hNode, &amp;value);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        printf(<span class="stringliteral">&quot;%s: min = %4.2f, max = %4.2f, value = %4.2f\n&quot;</span>, featureName, min, max, value);</div><div class="line"></div><div class="line">        <span class="comment">/* Set a new value. */</span></div><div class="line">        <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hNode, &amp;bval);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (bval)</div><div class="line">        {</div><div class="line">            value = 0.5 * (min + max);</div><div class="line">            printf(<span class="stringliteral">&quot;Setting %s to %4.2f\n&quot;</span>, featureName, value);</div><div class="line">            res = <a class="code" href="group__genapi.html#ga25b6711f2880b32e5dbc9660b0afd28a">GenApiFloatSetValue</a>(hNode, value);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            printf(<span class="stringliteral">&quot;Cannot set value for feature &#39;%s&#39; - node not writable\n&quot;</span>, featureName);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable\n&quot;</span>, featureName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Some features are boolean features that can be switched on and off.</span></div><div class="line"><span class="comment">   This function illustrates how to access boolean features. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateBooleanFeature(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;GammaEnable&quot;</span>; <span class="comment">/* The name of the feature. */</span></div><div class="line">    _Bool                value,bval;                    <span class="comment">/* The value of the feature. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    GENAPIC_RESULT      res;                           <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, featureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want a boolean feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fae5123b03d8d85a6f9503df0fc0e5de5b">BooleanNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not a boolean feature\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the feature is readable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Retrieve the current state of the feature. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga42f52ad1149bb050e52e918e5b9cd166">GenApiBooleanGetValue</a>(hNode, &amp;value);</div><div class="line">        CHECK(res);</div><div class="line">        printf(<span class="stringliteral">&quot;The %s features is %s\n&quot;</span>, featureName, value ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">/* Set a new value. */</span></div><div class="line">        <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hNode, &amp;bval);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (bval)</div><div class="line">        {</div><div class="line">            value = (_Bool) !value;  <span class="comment">/* New value */</span></div><div class="line">            printf(<span class="stringliteral">&quot;Switching the %s feature %s\n&quot;</span>, featureName, value ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span>);</div><div class="line">            res = <a class="code" href="group__genapi.html#ga209215d9a0073b004da8c07992f2d6e2">GenApiBooleanSetValue</a>(hNode, value);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            printf(<span class="stringliteral">&quot;Cannot set value for feature &#39;%s&#39; - node not writable\n&quot;</span>, featureName);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable\n&quot;</span>, featureName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Regardless of the parameter&#39;s type, any parameter value can be retrieved as a string. Each parameter</span></div><div class="line"><span class="comment">  can be set by passing in a string correspondingly. This function illustrates how to set and get the</span></div><div class="line"><span class="comment">  Width parameter as string. As demonstrated above, the Width parameter is of the integer type.</span></div><div class="line"><span class="comment">  */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateFromStringToString(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Width&quot;</span>;   <span class="comment">/* The name of the feature. */</span></div><div class="line"></div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    _Bool                bval;</div><div class="line">    GENAPIC_RESULT      res;                       <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, featureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want an integer feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fa1da780bf3139bd8e8c1415edf109f2fe">IntegerNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not an integer feature\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the feature is readable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> len;</div><div class="line">        <span class="keywordtype">char</span>   *buf, fixBuf[32];</div><div class="line">        _Bool   bval;</div><div class="line"></div><div class="line">        <span class="comment">/* Get the value of a feature as a string. Normally, getting the value consists of 3 steps:</span></div><div class="line"><span class="comment">           1.) Determine the required buffer size.</span></div><div class="line"><span class="comment">           2.) Allocate the buffer.</span></div><div class="line"><span class="comment">           3.) Retrieve the value. */</span></div><div class="line">        <span class="comment">/* ... Get the required buffer size. The size is queried by</span></div><div class="line"><span class="comment">               passing a NULL pointer as a pointer to the buffer. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga922c66737a0d35afb75babd096349df0">GenApiNodeToString</a>(hNode, NULL, &amp;len);</div><div class="line">        CHECK(res);</div><div class="line">        <span class="comment">/* ... len is set to the required buffer size (terminating zero included).</span></div><div class="line"><span class="comment">               Allocate the memory and retrieve the string. */</span></div><div class="line">        buf = (<span class="keywordtype">char</span> *) malloc(len);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga922c66737a0d35afb75babd096349df0">GenApiNodeToString</a>(hNode, buf, &amp;len);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        printf(<span class="stringliteral">&quot;%s: %s\n&quot;</span>, featureName, buf);</div><div class="line">        free(buf);</div><div class="line"></div><div class="line">        <span class="comment">/* You are not necessarily required to query the buffer size in advance. If the buffer is</span></div><div class="line"><span class="comment">           big enough, passing in a buffer and a pointer to its length will work.</span></div><div class="line"><span class="comment">           When the buffer is too small, an error is returned. */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Passing in a buffer that is too small. */</span></div><div class="line">        len = 1;</div><div class="line">        res = <a class="code" href="group__genapi.html#ga922c66737a0d35afb75babd096349df0">GenApiNodeToString</a>(hNode, fixBuf, &amp;len);</div><div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="group__errorcodes.html#ga13ccf80133dac135eb9da4ba1737dda1">GENAPI_E_INSUFFICIENT_BUFFER</a>)</div><div class="line">        {</div><div class="line">            <span class="comment">/* The buffer was too small. The required size is indicated by len. */</span></div><div class="line">            printf(<span class="stringliteral">&quot;Buffer is too small for the value of &#39;%s&#39;. The required buffer size is %d\n&quot;</span>, featureName, (<span class="keywordtype">int</span>) len);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            CHECK(res);  <span class="comment">/* Unexpected return value. */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Passing in a buffer with sufficient size. */</span></div><div class="line">        len = <span class="keyword">sizeof</span> fixBuf;</div><div class="line">        res = <a class="code" href="group__genapi.html#ga922c66737a0d35afb75babd096349df0">GenApiNodeToString</a>(hNode, fixBuf, &amp;len);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* A feature can be set as a string using the GenApiNodeFromString() function.</span></div><div class="line"><span class="comment">           If the content of a string can not be converted to the type of the feature, an</span></div><div class="line"><span class="comment">           error is returned. */</span></div><div class="line">        <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hNode, &amp;bval);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (bval)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__genapi.html#ga8ab4bb4047a4acdeaa77c0b03a4faa73">GenApiNodeFromString</a>(hNode, <span class="stringliteral">&quot;fourty-two&quot;</span>); <span class="comment">/* Can not be converted to an integer. */</span></div><div class="line">            <span class="keywordflow">if</span> (res != <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a>)</div><div class="line">            {</div><div class="line">                <span class="comment">/* Print out an error message. */</span></div><div class="line">                <span class="keywordtype">size_t</span> l;</div><div class="line">                <span class="keywordtype">char</span> *msg;</div><div class="line">                <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>(NULL, &amp;l); <span class="comment">/* Retrieve buffer size for the error message. */</span></div><div class="line">                msg = (<span class="keywordtype">char</span> *)malloc(l);             <span class="comment">/* Provide memory. */</span></div><div class="line">                <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>(msg, &amp;l);  <span class="comment">/* Retrieve the message. */</span></div><div class="line">                printf(<span class="stringliteral">&quot;%s\n&quot;</span>, msg);</div><div class="line">                free(msg);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            printf(<span class="stringliteral">&quot;Cannot set value for feature &#39;%s&#39; - node not writable\n&quot;</span>, featureName);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable\n&quot;</span>, featureName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* There are camera features that behave like enumerations. These features can take a value from a fixed</span></div><div class="line"><span class="comment">   set of possible values. One example is the pixel format feature. This function illustrates how to deal with</span></div><div class="line"><span class="comment">   enumeration features.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateEnumFeature(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;PixelFormat&quot;</span>;</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    _Bool                bval;</div><div class="line">    GENAPIC_RESULT      res;                           <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, featureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want an enumeration feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fad48b8683774fee61f13d3a84eef161e9">EnumerationNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not an enumeration feature\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the feature is readable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* The allowed values for an enumeration feature are represented as strings. Use the</span></div><div class="line"><span class="comment">    GenApiNodeFromString() and GenApiNodeToString() methods for setting and getting</span></div><div class="line"><span class="comment">    the value of an enumeration feature. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Symbolic names of pixel formats. */</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   symMono8[] = <span class="stringliteral">&quot;Mono8&quot;</span>,</div><div class="line">                            symMono16[] = <span class="stringliteral">&quot;Mono16&quot;</span>,</div><div class="line">                            symYUV422Packed[] = <span class="stringliteral">&quot;YUV422Packed&quot;</span>;</div><div class="line"></div><div class="line">        <span class="keywordtype">size_t</span>      len;                           <span class="comment">/* The length of the string. */</span></div><div class="line">        <span class="keywordtype">char</span>        value[64];                     <span class="comment">/* The current value of the feature. */</span></div><div class="line">        _Bool       supportsMono8, supportsYUV422Packed, supportsMono16;</div><div class="line">        <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a> hEntry;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Get the current value of the enumeration feature. */</span></div><div class="line">        len = <span class="keyword">sizeof</span> value;</div><div class="line">        res = <a class="code" href="group__genapi.html#ga922c66737a0d35afb75babd096349df0">GenApiNodeToString</a>(hNode, value, &amp;len);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        printf(<span class="stringliteral">&quot;PixelFormat: %s\n&quot;</span>, value);</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">        For an enumeration feature, the pylon Viewer&#39;s &quot;Feature Documentation&quot; window lists the</span></div><div class="line"><span class="comment">        names of the possible values. Some of the values may not be supported by the device.</span></div><div class="line"><span class="comment">        To check if a certain &quot;SomeValue&quot; value for a &quot;SomeFeature&quot; feature can be set, call the</span></div><div class="line"><span class="comment">        GenApiNodeIsAvailable() on the node of the enum entry.</span></div><div class="line"><span class="comment">        */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Check to see if the Mono8 pixel format can be set. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#gaf7e4e2969c8cad63148ce027dbe0d594">GenApiEnumerationGetEntryByName</a>(hNode, symMono8, &amp;hEntry);</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( hEntry != <a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__genapi.html#ga1939aeb73e04f1631e0fbc4e81d5f66c">GenApiNodeIsAvailable</a>(hEntry, &amp;supportsMono8);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            supportsMono8 = 0;</div><div class="line">        }</div><div class="line">        printf(<span class="stringliteral">&quot;%s %s a supported value for the PixelFormat feature\n&quot;</span>, symMono8, supportsMono8 ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">/* Check to see if the YUV422Packed pixel format can be set. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#gaf7e4e2969c8cad63148ce027dbe0d594">GenApiEnumerationGetEntryByName</a>(hNode, symYUV422Packed, &amp;hEntry);</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( hEntry != <a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__genapi.html#ga1939aeb73e04f1631e0fbc4e81d5f66c">GenApiNodeIsAvailable</a>(hEntry, &amp;supportsYUV422Packed);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            supportsYUV422Packed = 0;</div><div class="line">        }</div><div class="line">        printf(<span class="stringliteral">&quot;%s %s a supported value for the PixelFormat feature\n&quot;</span>, symYUV422Packed, supportsYUV422Packed ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line"></div><div class="line">        <span class="comment">/* Check to see if the Mono16 pixel format can be set. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#gaf7e4e2969c8cad63148ce027dbe0d594">GenApiEnumerationGetEntryByName</a>(hNode, symMono16, &amp;hEntry);</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( hEntry != <a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__genapi.html#ga1939aeb73e04f1631e0fbc4e81d5f66c">GenApiNodeIsAvailable</a>(hEntry, &amp;supportsMono16);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            supportsMono16 = 0;</div><div class="line">        }</div><div class="line">        printf(<span class="stringliteral">&quot;%s %s a supported value for the PixelFormat feature\n&quot;</span>, symMono16, supportsMono16 ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;is not&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Before writing a value, we recommend checking if the enumeration feature is</span></div><div class="line"><span class="comment">        currently writable. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hNode, &amp;bval);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (bval)</div><div class="line">        {</div><div class="line">            <span class="comment">/* The PixelFormat feature is writable, set it to one of the supported values. */</span></div><div class="line">            <span class="keywordflow">if</span> (supportsMono16)</div><div class="line">            {</div><div class="line">                printf(<span class="stringliteral">&quot;Setting PixelFormat to Mono16\n&quot;</span>);</div><div class="line">                res = <a class="code" href="group__genapi.html#ga8ab4bb4047a4acdeaa77c0b03a4faa73">GenApiNodeFromString</a>(hNode, symMono16);</div><div class="line">                CHECK(res);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (supportsYUV422Packed)</div><div class="line">            {</div><div class="line">                printf(<span class="stringliteral">&quot;Setting PixelFormat to YUV422Packed\n&quot;</span>);</div><div class="line">                res = <a class="code" href="group__genapi.html#ga8ab4bb4047a4acdeaa77c0b03a4faa73">GenApiNodeFromString</a>(hNode, symYUV422Packed);</div><div class="line">                CHECK(res);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (supportsMono8)</div><div class="line">            {</div><div class="line">                printf(<span class="stringliteral">&quot;Setting PixelFormat to Mono8\n&quot;</span>);</div><div class="line">                res = <a class="code" href="group__genapi.html#ga8ab4bb4047a4acdeaa77c0b03a4faa73">GenApiNodeFromString</a>(hNode, symMono8);</div><div class="line">                CHECK(res);</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Reset the PixelFormat feature to its previous value. */</span></div><div class="line">            res = <a class="code" href="group__genapi.html#ga8ab4bb4047a4acdeaa77c0b03a4faa73">GenApiNodeFromString</a>(hNode, value);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            printf(<span class="stringliteral">&quot;Cannot set value for feature &#39;%s&#39; - node not writable\n&quot;</span>, featureName);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable\n&quot;</span>, featureName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Enumerate all possible entries for an enumerated feature. For every entry, a selection</span></div><div class="line"><span class="comment">   of properties is displayed. A loop similar to the one shown below may be part of a</span></div><div class="line"><span class="comment">   GUI program that wants to fill the entries of a menu. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateEnumIteration(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;PixelFormat&quot;</span>;</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    _Bool                bval;</div><div class="line">    GENAPIC_RESULT      res;                           <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, featureName, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want an enumeration feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fad48b8683774fee61f13d3a84eef161e9">EnumerationNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not an enumeration feature\n&quot;</span>, featureName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the feature is readable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga1aa1911e20805459c37f6b0d02f7aed7">GenApiNodeIsReadable</a>(hNode, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> max, i;</div><div class="line"></div><div class="line">        <span class="comment">/* check entries. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#gafbf026e5b231050cc2bf395b7ef898bd">GenApiEnumerationGetNumEntries</a>(hNode, &amp;max);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Write out header. */</span></div><div class="line">        printf(<span class="stringliteral">&quot;Allowed values for feature &#39;%s&#39;:\n&quot;</span></div><div class="line">               <span class="stringliteral">&quot;--------------\n&quot;</span>,</div><div class="line">               featureName);</div><div class="line"></div><div class="line">        <span class="comment">/* A loop to visit every enumeration entry node once. */</span></div><div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; max; i++)</div><div class="line">        {</div><div class="line">            <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a> hEntry;</div><div class="line">            <span class="keywordtype">char</span> name[128], displayName[STRING_BUFFER_SIZE], description[STRING_BUFFER_SIZE];</div><div class="line">            <span class="keywordtype">size_t</span> siz;</div><div class="line">            _Bool avail;</div><div class="line"></div><div class="line">            <span class="comment">/* Get handle for enumeration entry node. */</span></div><div class="line">            res = <a class="code" href="group__genapi.html#ga8c1e9e9818ce8c224be4beb10ab8236d">GenApiEnumerationGetEntryByIndex</a>(hNode, i, &amp;hEntry);</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            <span class="comment">/* Get node name. */</span></div><div class="line">            siz = <span class="keyword">sizeof</span> name;</div><div class="line">            res = <a class="code" href="group__genapi.html#gad7d8ea46ffe207f8a27013ea1da98091">GenApiNodeGetName</a>(hEntry, name, &amp;siz);</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            <span class="comment">/* Get display name. */</span></div><div class="line">            siz = <span class="keyword">sizeof</span> displayName;</div><div class="line">            res = <a class="code" href="group__genapi.html#ga590e5cda1e2408d73324ef8ab7c7eda8">GenApiNodeGetDisplayName</a>(hEntry, displayName, &amp;siz);</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            <span class="comment">/* Get description. */</span></div><div class="line">            siz = <span class="keyword">sizeof</span> description;</div><div class="line">            res = <a class="code" href="group__genapi.html#ga881d23ca8565f282055e08631b442bf8">GenApiNodeGetDescription</a>(hEntry, description, &amp;siz);</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            <span class="comment">/* Get availability. */</span></div><div class="line">            res = <a class="code" href="group__genapi.html#ga1939aeb73e04f1631e0fbc4e81d5f66c">GenApiNodeIsAvailable</a>(hEntry, &amp;avail);</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            <span class="comment">/* Write out results. */</span></div><div class="line">            printf(<span class="stringliteral">&quot;Node name:    %s\n&quot;</span></div><div class="line">                   <span class="stringliteral">&quot;Display name: %s\n&quot;</span></div><div class="line">                   <span class="stringliteral">&quot;Description:  %s\n&quot;</span></div><div class="line">                   <span class="stringliteral">&quot;Available:    %s\n&quot;</span></div><div class="line">                   <span class="stringliteral">&quot;--------------\n&quot;</span>,</div><div class="line">                   name, displayName, description, avail ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot read feature &#39;%s&#39; - node not readable\n&quot;</span>, featureName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Traverse the feature tree, displaying all categories and all features. */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">handleCategory(<a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a> hRoot, <span class="keywordtype">char</span> * buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT      res;</div><div class="line">    <span class="keywordtype">size_t</span>              bufsiz, siz, numfeat, i;</div><div class="line"></div><div class="line">    <span class="comment">/* Write out node name. */</span></div><div class="line">    siz = bufsiz = STRING_BUFFER_SIZE - depth * 2;</div><div class="line">    res = <a class="code" href="group__genapi.html#gad7d8ea46ffe207f8a27013ea1da98091">GenApiNodeGetName</a>(hRoot, buf, &amp;siz);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Get the number of feature nodes in this category. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga09f246d6d86aa6c1c31fdc1ce3bdd0e3">GenApiCategoryGetNumFeatures</a>(hRoot, &amp;numfeat);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;%s category has %u children\n&quot;</span>, buf - depth * 2, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) numfeat);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Increase indentation. */</span></div><div class="line">    *buf++ = <span class="charliteral">&#39; &#39;</span>;</div><div class="line">    *buf++ = <span class="charliteral">&#39; &#39;</span>;</div><div class="line">    bufsiz -= 2;</div><div class="line">    ++depth;</div><div class="line"></div><div class="line">    <span class="comment">/* Now loop over all feature nodes. */</span></div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; numfeat; ++i)</div><div class="line">    {</div><div class="line">        <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">        <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line"></div><div class="line">        <span class="comment">/* Get next feature node and check its type. */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga6db8d5ef0448213539baf0f04b44c6e2">GenApiCategoryGetFeatureByIndex</a>(hRoot, i, &amp;hNode);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hNode, &amp;nodeType);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fa50b0d16e6ab8a004634e95a13d197c86">Category</a> != nodeType)</div><div class="line">        {</div><div class="line">            <span class="comment">/* A regular feature. */</span></div><div class="line">            <a class="code" href="group__genapi.html#ga0722c4c9851710e9c198ec47d287b0c5">EGenApiAccessMode</a> am;</div><div class="line">            <span class="keyword">const</span> <span class="keywordtype">char</span> *amode;</div><div class="line"></div><div class="line">            siz = bufsiz;</div><div class="line">            res = <a class="code" href="group__genapi.html#gad7d8ea46ffe207f8a27013ea1da98091">GenApiNodeGetName</a>(hNode, buf, &amp;siz);</div><div class="line">            CHECK(res);</div><div class="line">            res = <a class="code" href="group__genapi.html#ga7d193a5396e518378a6313222ed3e0c3">GenApiNodeGetAccessMode</a>(hNode, &amp;am);</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            <span class="keywordflow">switch</span> (am)</div><div class="line">            {</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__genapi.html#gga0722c4c9851710e9c198ec47d287b0c5a26d79910e64c12e79ffb16d6d4347e1c">NI</a>:</div><div class="line">                amode = <span class="stringliteral">&quot;not implemented&quot;</span>;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__genapi.html#gga0722c4c9851710e9c198ec47d287b0c5ac75245149c3f64d74430b8996b1e0558">NA</a>:</div><div class="line">                amode = <span class="stringliteral">&quot;not available&quot;</span>;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__genapi.html#gga0722c4c9851710e9c198ec47d287b0c5a60d1a52f84d34da6f6537317a1775929">WO</a>:</div><div class="line">                amode = <span class="stringliteral">&quot;write only&quot;</span>;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__genapi.html#gga0722c4c9851710e9c198ec47d287b0c5a42e9aa764b9ee7ecf7e668462de6f96d">RO</a>:</div><div class="line">                amode = <span class="stringliteral">&quot;read only&quot;</span>;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">case</span> <a class="code" href="group__genapi.html#gga0722c4c9851710e9c198ec47d287b0c5aec2497e0c8af01c04bec31ec0d1d7847">RW</a>:</div><div class="line">                amode = <span class="stringliteral">&quot;read and write&quot;</span>;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            <span class="keywordflow">default</span>:</div><div class="line">                amode = <span class="stringliteral">&quot;undefined&quot;</span>;</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            printf(<span class="stringliteral">&quot;%s feature - access: %s\n&quot;</span>, buf - depth * 2, amode);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            <span class="comment">/* Another category node. */</span></div><div class="line">            handleCategory(hNode, buf, depth);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateCategory(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hNode;</div><div class="line">    <span class="keywordtype">char</span>                buf[512];</div><div class="line">    GENAPIC_RESULT      res;</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the root node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, <span class="stringliteral">&quot;Root&quot;</span>, &amp;hNode);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    handleCategory(hNode, buf, 0);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* There are camera features, such as starting image acquisition, that represent a command.</span></div><div class="line"><span class="comment">   This function that loads the factory settings, illustrates how to execute a command feature.  */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line">demonstrateCommandFeature(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   selectorName[] = <span class="stringliteral">&quot;UserSetSelector&quot;</span>,</div><div class="line">                        commandName[] = <span class="stringliteral">&quot;UserSetLoad&quot;</span>;</div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>      hNodeMap;</div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>         hCommand, hSelector;</div><div class="line">    <a class="code" href="group__genapi.html#ga71b037111b67ab501e3cf0fabc97685f">EGenApiNodeType</a>     nodeType;</div><div class="line">    _Bool                bval;</div><div class="line">    GENAPIC_RESULT      res;  <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the device&#39;s node map. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga44d55a65e0dd34dca90ca696beda5bf3">PylonDeviceGetNodeMap</a>(hDev, &amp;hNodeMap);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the command node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, commandName, &amp;hCommand);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hCommand)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, commandName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Look up the selector node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>(hNodeMap, selectorName, &amp;hSelector);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hSelector)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;There is no feature named &#39;%s&#39;\n&quot;</span>, selectorName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We want a command feature node. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga9494f3c1973aa7768ddd7b65283f048f">GenApiNodeGetType</a>(hCommand, &amp;nodeType);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__genapi.html#gga71b037111b67ab501e3cf0fabc97685fa17d1918d0850eea9a2f6ed960628c052">CommandNode</a> != nodeType)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;&#39;%s&#39; is not a command feature\n&quot;</span>, selectorName);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Before executing the user set load command, the configuration set selector must be</span></div><div class="line"><span class="comment">       set to the default set. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the selector is writable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hSelector, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Choose the default configuration set (with one of the factory setups chosen). */</span></div><div class="line">        res = <a class="code" href="group__genapi.html#ga8ab4bb4047a4acdeaa77c0b03a4faa73">GenApiNodeFromString</a>(hSelector, <span class="stringliteral">&quot;Default&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot set selector &#39;%s&#39; - node not writable\n&quot;</span>, selectorName);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the command is writable. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#gacfed6478a76075e94c259e45a3516367">GenApiNodeIsWritable</a>(hCommand, &amp;bval);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (bval)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Execute the configuration set load command. */</span></div><div class="line">        printf(<span class="stringliteral">&quot;Loading the default set.\n&quot;</span>);</div><div class="line">        res = <a class="code" href="group__genapi.html#ga4ccdfd5a617608617f41d1ce14e6a1ce">GenApiCommandExecute</a>(hCommand);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;Cannot execute command &#39;%s&#39; - node not writable\n&quot;</span>, commandName);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span></div><div class="line">main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;           <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevices;    <span class="comment">/* Number of available devices. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev;          <span class="comment">/* Handle for the pylon device. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>(&amp;numDevices);</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> (0 == numDevices)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;No devices found.\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>(0, &amp;hDev);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for configuring</span></div><div class="line"><span class="comment">    parameters and for grabbing images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>(hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> buf[256];</div><div class="line">        <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">        _Bool isReadable;</div><div class="line"></div><div class="line">        isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> (isReadable)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz);</div><div class="line">            CHECK(res);</div><div class="line">            printf(<span class="stringliteral">&quot;Using camera %s\n&quot;</span>, buf);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Switch on the MigrationModeEnable feature.  */</span></div><div class="line">    SetMigrationModeEnable(hDev);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to check the accessibility of a feature. */</span></div><div class="line">    demonstrateAccessibilityCheck(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle integer camera parameters. */</span></div><div class="line">    demonstrateIntFeature(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle floating point camera parameters. */</span></div><div class="line">    demonstrateFloatFeature(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle boolean camera parameters. */</span></div><div class="line">    demonstrateBooleanFeature(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Each feature can be read as a string and also set as a string. */</span></div><div class="line">    demonstrateFromStringToString(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle enumeration camera parameters. */</span></div><div class="line">    demonstrateEnumFeature(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to iterate enumeration entries. */</span></div><div class="line">    demonstrateEnumIteration(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to execute actions. */</span></div><div class="line">    demonstrateCommandFeature(hDev);</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate category nodes. */</span></div><div class="line">    demonstrateCategory(hDev);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. Close and release the pylon device. */</span></div><div class="line"></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>(hDev);</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> (hDev);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_grabtwocameras"></a>
GrabTwoCameras Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">   This sample illustrates how to grab images and process images</span></div><div class="line"><span class="comment">   using multiple cameras simultaneously.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">   The sample uses a pool of buffers that are passed to a stream grabber to be filled with</span></div><div class="line"><span class="comment">   image data. Once a buffer is filled and ready for processing, the buffer is retrieved from</span></div><div class="line"><span class="comment">   the stream grabber, processed, and passed back to the stream grabber to be filled again.</span></div><div class="line"><span class="comment">   Buffers retrieved from the stream grabber are not overwritten as long as</span></div><div class="line"><span class="comment">   they are not passed back to the stream grabber.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifndef _WIN32_WINNT</span></div><div class="line"><span class="preprocessor">#   define _WIN32_WINNT 0x0400</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_LINUX_BUILD</span></div><div class="line"><span class="preprocessor">#   include &lt;sys/timerfd.h&gt;</span></div><div class="line"><span class="preprocessor">#   include &lt;alloca.h&gt;</span></div><div class="line"><span class="preprocessor">#   include &lt;errno.h&gt;</span></div><div class="line"><span class="preprocessor">#   include &lt;unistd.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="comment">/* Limits the amount of cameras used for grabbing.</span></div><div class="line"><span class="comment">   It is important to manage the available bandwidth when grabbing with multiple</span></div><div class="line"><span class="comment">   cameras. This applies, for instance, if two GigE cameras are connected to the</span></div><div class="line"><span class="comment">   same network adapter via a switch. To manage the bandwidth, the GevSCPD</span></div><div class="line"><span class="comment">   interpacket delay parameter and the GevSCFTD transmission delay parameter can</span></div><div class="line"><span class="comment">   be set for each GigE camera device. The &quot;Controlling Packet Transmission Timing</span></div><div class="line"><span class="comment">   with the Interpacket and Frame Transmission Delays on Basler GigE Vision Cameras&quot;</span></div><div class="line"><span class="comment">   Application Note (AW000649xx000) provides more information about this topic. */</span></div><div class="line"><span class="preprocessor">#define NUM_DEVICES 2</span></div><div class="line"><span class="preprocessor">#define NUM_BUFFERS 5         </span><span class="comment">/* Number of buffers used for grabbing. */</span><span class="preprocessor"></span></div><div class="line"></div><div class="line"><span class="preprocessor">#define GIGE_PACKET_SIZE       1500 </span><span class="comment">/* Size of one Ethernet packet. */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define GIGE_PROTOCOL_OVERHEAD 36   </span><span class="comment">/* Total number of bytes of protocol overhead. */</span><span class="preprocessor"></span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"><span class="comment">/* Calculating the minimum and maximum gray value. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;                      <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevicesAvail;          <span class="comment">/* Number of available devices. */</span></div><div class="line">    _Bool                        isAvail;                  <span class="comment">/* Used for checking feature availability. */</span></div><div class="line">    <span class="keywordtype">int</span>                         deviceIndex;              <span class="comment">/* Index of device used in following variables. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga0d7504543e64485cafb24eeb77c9da77">PYLON_WAITOBJECTS_HANDLE</a>    wos;                      <span class="comment">/* Wait objects. */</span></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">    HANDLE                      hTimer;                   <span class="comment">/* Grab timer. */</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    <span class="keywordtype">int</span>                         fdTimer;                  <span class="comment">/* Grab timer. */</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a>     woTimer;                  <span class="comment">/* Timer wait object. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* These are camera specific variables */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev[NUM_DEVICES];        <span class="comment">/* Handle for the pylon device. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2c3e1f8aa6bfd1a1141f840aae4381a3">PYLON_STREAMGRABBER_HANDLE</a>  hGrabber[NUM_DEVICES];    <span class="comment">/* Handle for the pylon stream grabber. */</span></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>              *buffers[NUM_DEVICES][NUM_BUFFERS];    <span class="comment">/* Buffers used for grabbing. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gad50f3bf650f0859c7e1d70ad12a47f63">PYLON_STREAMBUFFER_HANDLE</a>   bufHandles[NUM_DEVICES][NUM_BUFFERS]; <span class="comment">/* Handles for the buffers. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevicesAvail );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( numDevicesAvail &lt; NUM_DEVICES)</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;Not enough devices found. Found %u devices. At least %i devices needed to run this sample.\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) numDevicesAvail, NUM_DEVICES );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_SUCCESS);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Create wait objects (must be done outside of the loop). */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga353472a82bfd5779376c28d32844227a">PylonWaitObjectsCreate</a>(&amp;wos);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* In this sample, we want to grab for a given amount of time, then stop. */</span></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">    <span class="comment">/* Create a Windows timer, wrap it in a pylon C wait object, and add it to</span></div><div class="line"><span class="comment">       the wait object set. */</span></div><div class="line">    hTimer = CreateWaitableTimer(NULL, TRUE, NULL);</div><div class="line">    <span class="keywordflow">if</span> (hTimer == NULL)</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;CreateWaitableTimer() failed.\n&quot;</span> );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line">    res = PylonWaitObjectFromW32(hTimer, 0, &amp;woTimer);</div><div class="line">    CHECK(res);</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    <span class="comment">/* Create a Linux timer, wrap it in a pylon C wait object, and add it to</span></div><div class="line"><span class="comment">       the wait object set. */</span></div><div class="line">    fdTimer = timerfd_create(CLOCK_MONOTONIC, 0);</div><div class="line">    <span class="keywordflow">if</span> (fdTimer == -1)</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;timerfd_create() failed. %s\n&quot;</span>, strerror(errno) );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line">    res = <a class="code" href="group__pylon.html#ga4be0658786cb3f515b1da2c19603f6a1">PylonWaitObjectFromFd</a>(fdTimer, &amp;woTimer);</div><div class="line">    CHECK(res);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa4047a9ffc958de25a824ebf5931a21c">PylonWaitObjectsAdd</a>(wos, woTimer, NULL);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Open cameras and set parameters. */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; NUM_DEVICES; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <a class="code" href="struct_pylon_device_info__t.html">PylonDeviceInfo_t</a> di;</div><div class="line"></div><div class="line">        <span class="comment">/* Get a handle for the device. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( deviceIndex, &amp;hDev[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Before using the device, it must be opened. Open it for setting</span></div><div class="line"><span class="comment">           parameters and for grabbing images. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev[deviceIndex], PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">        {</div><div class="line">            <span class="keywordtype">char</span> buf[256];</div><div class="line">            <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">            _Bool isReadable;</div><div class="line"></div><div class="line">            isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev[deviceIndex], <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> ( isReadable )</div><div class="line">            {</div><div class="line">                res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz );</div><div class="line">                CHECK(res);</div><div class="line">                printf(<span class="stringliteral">&quot;Using camera &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Set the pixel format to Mono8, where gray values will be output as 8 bit values for each pixel. */</span></div><div class="line">        <span class="comment">/* ... First check to see if the device supports the Mono8 format. */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev[deviceIndex], <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( ! isAvail )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Feature is not available. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Device doesn&#39;t support the Mono8 pixel format&quot;</span>);</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit (EXIT_FAILURE);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* ... Set the pixel format to Mono8. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Disable acquisition start trigger if available. */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev[deviceIndex], <span class="stringliteral">&quot;EnumEntry_TriggerSelector_AcquisitionStart&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> (isAvail)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Disable frame burst start trigger if available. */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev[deviceIndex], <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameBurstStart&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> (isAvail)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameBurstStart&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Disable frame start trigger if available. */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev[deviceIndex], <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameStart&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> (isAvail)</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameStart&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* We will use the Continuous frame mode, i.e., the camera delivers images continuously. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;AcquisitionMode&quot;</span>, <span class="stringliteral">&quot;Continuous&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#gaecd6211310dd30bd56c1826d1d173899">PylonDeviceGetDeviceInfo</a>( hDev[deviceIndex], &amp;di);</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> (strcmp(di.<a class="code" href="struct_pylon_device_info__t.html#a4dee0c94c4000dcbcf2dc84f3e565295">DeviceClass</a>, <span class="stringliteral">&quot;BaslerGigE&quot;</span>) == 0)</div><div class="line">        {</div><div class="line">            <span class="comment">/* For GigE cameras, we recommend increasing the packet size for better</span></div><div class="line"><span class="comment">               performance. When the network adapter supports jumbo frames, set the packet</span></div><div class="line"><span class="comment">               size to a value &gt; 1500, e.g., to 8192. In this sample, we only set the packet size</span></div><div class="line"><span class="comment">               to 1500.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">               Also we set the Inter-Packet and the Frame Transmission delay</span></div><div class="line"><span class="comment">               so the switch can line up packets better.</span></div><div class="line"><span class="comment">            */</span></div><div class="line"></div><div class="line">            res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, GIGE_PACKET_SIZE );</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;GevSCPD&quot;</span>, (GIGE_PACKET_SIZE + GIGE_PROTOCOL_OVERHEAD)*(NUM_DEVICES-1) );</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;GevSCFTD&quot;</span>, (GIGE_PACKET_SIZE + GIGE_PROTOCOL_OVERHEAD) * deviceIndex );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Allocate and register buffers for grab. */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; NUM_DEVICES; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> i;</div><div class="line">        <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a> hWait;</div><div class="line">        <span class="keywordtype">size_t</span> payloadSize;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Image grabbing is done using a stream grabber.</span></div><div class="line"><span class="comment">           A device may be able to provide different streams. A separate stream grabber must</span></div><div class="line"><span class="comment">           be used for each stream. In this sample, we create a stream grabber for the default</span></div><div class="line"><span class="comment">           stream, i.e., the first stream ( index == 0 ). */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Get the number of streams supported by the device and the transport layer. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga9a3ad0ce0576aaff19d7b6f3172ef5b8">PylonDeviceGetNumStreamGrabberChannels</a>( hDev[deviceIndex], &amp;i );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( i &lt; 1 )</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;The transport layer doesn&#39;t support image streams.\n&quot;</span>);</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Create and open a stream grabber for the first channel. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga07365e8eb42cbbf992511899023428a2">PylonDeviceGetStreamGrabber</a>( hDev[deviceIndex], 0, &amp;hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#ga46fc44105ef8adf7110d3d0fcd51aea3">PylonStreamGrabberOpen</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Get a handle for the stream grabber&#39;s wait object. The wait object</span></div><div class="line"><span class="comment">           allows waiting for buffers to be filled with grabbed data. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga87891dfaee855990f39551d7fcf574c8">PylonStreamGrabberGetWaitObject</a>( hGrabber[deviceIndex], &amp;hWait );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Add the stream grabber&#39;s wait object to our wait objects.</span></div><div class="line"><span class="comment">           This is needed to be able to wait until at least one camera has</span></div><div class="line"><span class="comment">           grabbed an image in the grab loop below. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa4047a9ffc958de25a824ebf5931a21c">PylonWaitObjectsAdd</a>(wos, hWait, NULL);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga24f157b352652e4e031b748160cede56">PylonStreamGrabberGetPayloadSize</a>( hDev[deviceIndex], hGrabber[deviceIndex], &amp;payloadSize );</div><div class="line">        CHECK( res );</div><div class="line"></div><div class="line">        <span class="comment">/* Allocate memory for grabbing.  */</span></div><div class="line">        <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">        {</div><div class="line">            buffers[deviceIndex][i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) malloc ( payloadSize );</div><div class="line">            <span class="keywordflow">if</span> ( NULL == buffers[deviceIndex][i] )</div><div class="line">            {</div><div class="line">                fprintf( stderr, <span class="stringliteral">&quot;Out of memory.\n&quot;</span> );</div><div class="line">                <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">                pressEnterToExit();</div><div class="line">                exit(EXIT_FAILURE);</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* We must tell the stream grabber the number and size of the buffers we are using. */</span></div><div class="line">        <span class="comment">/* .. We will not use more than NUM_BUFFERS for grabbing. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga95bd2bdbbda3ec1029ff221d063ed81e">PylonStreamGrabberSetMaxNumBuffer</a>( hGrabber[deviceIndex], NUM_BUFFERS );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="comment">/* .. We will not use buffers bigger than payloadSize bytes. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga8eac300db1f6ee57bd3cb9a9ce44e1fd">PylonStreamGrabberSetMaxBufferSize</a>( hGrabber[deviceIndex], payloadSize );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Allocate the resources required for grabbing. After this, critical parameters</span></div><div class="line"><span class="comment">           that impact the payload size must not be changed until FinishGrab() is called. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa0e2988f96c56e94b39d137009b902de">PylonStreamGrabberPrepareGrab</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Before using the buffers for grabbing, they must be registered at</span></div><div class="line"><span class="comment">           the stream grabber. For each registered buffer, a buffer handle</span></div><div class="line"><span class="comment">           is returned. After registering, these handles are used instead of the</span></div><div class="line"><span class="comment">           raw pointers. */</span></div><div class="line">        <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga9cf59896fdbc833402259b3c6be9655e">PylonStreamGrabberRegisterBuffer</a>( hGrabber[deviceIndex], buffers[deviceIndex][i], payloadSize,  &amp;bufHandles[deviceIndex][i] );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Feed the buffers into the stream grabber&#39;s input queue. For each buffer, the API</span></div><div class="line"><span class="comment">           allows passing in a pointer to additional context information. This pointer</span></div><div class="line"><span class="comment">           will be returned unchanged when the grab is finished. In our example, we use the index of the</span></div><div class="line"><span class="comment">           buffer as context information. */</span></div><div class="line">        <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber[deviceIndex], bufHandles[deviceIndex][i], (<span class="keywordtype">void</span> *) i );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* The stream grabber is now prepared. As soon the camera starts to acquire images,</span></div><div class="line"><span class="comment">       the image data will be grabbed into the provided buffers.  */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; NUM_DEVICES; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Start the image acquisition engine. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gad3f7e833b396daf05e44c54f3b951f84">PylonStreamGrabberStartStreamingIfMandatory</a>(hGrabber[deviceIndex]);</div><div class="line">        <span class="comment">/* do not call CHECK() here! Instead exit the loop */</span></div><div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a>)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Let the camera acquire images. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">        <span class="comment">/* do not call CHECK() here! Instead exit the loop */</span></div><div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a>)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Only start the grab loop if all cameras have been &quot;started&quot; */</span></div><div class="line">    <span class="keywordflow">if</span> (res == <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a>)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nGrabs = 0;</div><div class="line"></div><div class="line">        <span class="comment">/* Set the timer to 5 s and start it. */</span></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">        LARGE_INTEGER intv;</div><div class="line"></div><div class="line">        intv.QuadPart = -50000000I64;</div><div class="line">        <span class="keywordflow">if</span> (!SetWaitableTimer(hTimer, &amp;intv, 0, NULL, NULL, FALSE))</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;SetWaitableTimer() failed.\n&quot;</span> );</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">        <span class="keyword">struct </span>itimerspec timer_value;</div><div class="line"></div><div class="line">        timer_value.it_interval.tv_sec = 0;</div><div class="line">        timer_value.it_interval.tv_nsec = 0;</div><div class="line">        timer_value.it_value.tv_sec = 5;</div><div class="line">        timer_value.it_value.tv_nsec = 0;</div><div class="line">        <span class="keywordflow">if</span> (timerfd_settime(fdTimer, 0, &amp;timer_value, NULL) == -1)</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;timerfd_settime() failed. %s\n&quot;</span>, strerror(errno) );</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        <span class="comment">/* Grab until the timer expires. */</span></div><div class="line">        <span class="keywordflow">for</span> (;;)</div><div class="line">        {</div><div class="line">            _Bool isReady;</div><div class="line">            <span class="keywordtype">size_t</span> woidx;</div><div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min, max;</div><div class="line">            <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a> grabResult;</div><div class="line"></div><div class="line">            <span class="comment">/* Wait for the next buffer to be filled. Wait up to 1000 ms. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga3650b45e8e45fd56f9775abb485f4e4a">PylonWaitObjectsWaitForAny</a>(wos, 1000, &amp;woidx, &amp;isReady );</div><div class="line">            CHECK(res);</div><div class="line">            <span class="keywordflow">if</span> ( !isReady )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Timeout occurred. */</span></div><div class="line">                fputs(<span class="stringliteral">&quot;Grab timeout occurred.\n&quot;</span>, stderr);</div><div class="line">                <span class="keywordflow">break</span>; <span class="comment">/* Stop grabbing. */</span></div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* If the timer has expired, exit the grab loop */</span></div><div class="line">            <span class="keywordflow">if</span> (woidx == 0) {</div><div class="line">                fputs(<span class="stringliteral">&quot;Grabbing completed successfully.\n&quot;</span>, stderr);</div><div class="line">                <span class="keywordflow">break</span>;  <span class="comment">/* timer expired */</span></div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Account for the timer. */</span></div><div class="line">            --woidx;</div><div class="line"></div><div class="line">            <span class="comment">/* Retrieve the grab result. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber[woidx], &amp;grabResult, &amp;isReady );</div><div class="line">            CHECK(res);</div><div class="line">            <span class="keywordflow">if</span> ( !isReady )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Oops. No grab result available? We should never have reached this point.</span></div><div class="line"><span class="comment">                   Since the wait operation above returned without a timeout, a grab result</span></div><div class="line"><span class="comment">                   should be available. */</span></div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Failed to retrieve a grab result\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Check to see if the image was grabbed successfully. */</span></div><div class="line">            <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea354b91f0a367f3779da75499a612147a">Grabbed</a> )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Success. Perform image processing. Since we passed more than one buffer</span></div><div class="line"><span class="comment">                   to the stream grabber, the remaining buffers are filled while</span></div><div class="line"><span class="comment">                   we do the image processing. The processed buffer won&#39;t be touched by</span></div><div class="line"><span class="comment">                   the stream grabber until we pass it back to the stream grabber. */</span></div><div class="line"></div><div class="line">                <span class="comment">/* Pointer to the buffer attached to the grab result</span></div><div class="line"><span class="comment">                   Get the buffer pointer from the result structure. Since we also got the buffer index,</span></div><div class="line"><span class="comment">                   we could alternatively use buffers[bufferIndex]. */</span></div><div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa24d463aa40da5523491da53b48eeaf1">pBuffer</a>;</div><div class="line"></div><div class="line">                <span class="comment">/* Perform processing. */</span></div><div class="line">                getMinMax( buffer, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a5de217563769a2fecc939a8803c0de49">SizeX</a>, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#ac53ad1519fff771ec8810fb5ffea222d">SizeY</a>, &amp;min, &amp;max );</div><div class="line">                printf(<span class="stringliteral">&quot;Grabbed frame #%2u from camera %2u into buffer %2p. Min. val=%3u, Max. val=%3u\n&quot;</span>,</div><div class="line">                       nGrabs, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) woidx, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3fa626bc45486a5b8561cbdfd3847ae4">Context</a>, min, max);</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">                <span class="comment">/* Display image */</span></div><div class="line">                res = PylonImageWindowDisplayImageGrabResult(woidx, &amp;grabResult);</div><div class="line">                CHECK(res);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea1f506c828f4945d6b5a7bf71445f7d54">Failed</a> )</div><div class="line">            {</div><div class="line">                fprintf( stderr,  <span class="stringliteral">&quot;Frame %u wasn&#39;t grabbed successfully.  Error code = 0x%08X\n&quot;</span>,</div><div class="line">                    nGrabs, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a597c9f0ddc8e7a63df7e108441e9bd78">ErrorCode</a> );</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Once finished with the processing, requeue the buffer to be filled again. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber[woidx], grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a0dc087840e7dda694c92e8a54ac56838">hBuffer</a>, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3fa626bc45486a5b8561cbdfd3847ae4">Context</a> );</div><div class="line">            CHECK(res);</div><div class="line"></div><div class="line">            nGrabs++;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Stop the image acquisition on the cameras. */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; NUM_DEVICES; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <span class="comment">/* ... Stop the camera. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>(hDev[deviceIndex], <span class="stringliteral">&quot;AcquisitionStop&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* ... Stop the image acquisition engine. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga7a2d429ce4f61d445f534305efcb3298">PylonStreamGrabberStopStreamingIfMandatory</a>(hGrabber[deviceIndex]);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Remove all wait objects from waitobjects. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga47b8cc6b77fc52d35772d8a1bbc218b2">PylonWaitObjectsRemoveAll</a>(wos);</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga9d6f7c001d51813d528da4ffa0c12d13">PylonWaitObjectDestroy</a>(woTimer);</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#gacc38d5a8d53dc1b3bd4764727d31e6f1">PylonWaitObjectsDestroy</a>(wos);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; NUM_DEVICES; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> i;</div><div class="line">        _Bool rdy;</div><div class="line">        <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a> grabResult;</div><div class="line"></div><div class="line">        <span class="comment">/* ... We must issue a flush call to ensure that all pending buffers are put into the</span></div><div class="line"><span class="comment">           stream grabber&#39;s output queue. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa571171cb0805c4d0490caa1413553ae">PylonStreamGrabberFlushBuffersToOutput</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* ... The buffers can now be retrieved from the stream grabber. */</span></div><div class="line">        <span class="keywordflow">do</span></div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber[deviceIndex], &amp;grabResult, &amp;rdy );</div><div class="line">            CHECK(res);</div><div class="line">        } <span class="keywordflow">while</span> ( rdy );</div><div class="line"></div><div class="line">        <span class="comment">/* ... When all buffers are retrieved from the stream grabber, they can be deregistered.</span></div><div class="line"><span class="comment">           After deregistering the buffers, it is safe to free the memory. */</span></div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#gaa98d52b7c02efc120a7a36b45282b3b0">PylonStreamGrabberDeregisterBuffer</a>( hGrabber[deviceIndex], bufHandles[deviceIndex][i] );</div><div class="line">            CHECK(res);</div><div class="line">            free( buffers[deviceIndex][i] );</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* ... Release grabbing related resources. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gab84d13dc2435c44750259a4bb185319a">PylonStreamGrabberFinishGrab</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* After calling PylonStreamGrabberFinishGrab(), parameters that impact the payload size (e.g.,</span></div><div class="line"><span class="comment">           the AOI width and height parameters) are unlocked and can be modified again. */</span></div><div class="line"></div><div class="line">        <span class="comment">/* ... Close the stream grabber. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga01831a1617fdb98526757ed0e090f9f2">PylonStreamGrabberClose</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* ... Close and release the pylon device. The stream grabber becomes invalid</span></div><div class="line"><span class="comment">           after closing the pylon device. Don&#39;t call stream grabber related methods after</span></div><div class="line"><span class="comment">           closing or releasing the device. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="comment">/* ... Shut down the pylon runtime system. Don&#39;t call any pylon function after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_LINUX_BUILD</span></div><div class="line">    close(fdTimer);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">       ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) alloca( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Simple &quot;image processing&quot; function returning the minimum and maximum gray</span></div><div class="line"><span class="comment">   value of an 8 bit gray value image. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min = 255;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> max = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> val;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( p = pImg; p &lt; pImg + width * height; p++ )</div><div class="line">    {</div><div class="line">        val = *p;</div><div class="line">        <span class="keywordflow">if</span> ( val &gt; max )</div><div class="line">           max = val;</div><div class="line">        <span class="keywordflow">if</span> ( val &lt; min )</div><div class="line">           min = val;</div><div class="line">    }</div><div class="line">    *pMin = min;</div><div class="line">    *pMax = max;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_overlappedgrab"></a>
OverlappedGrab Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">   This sample illustrates how to grab and process images asynchronously, i.e.,</span></div><div class="line"><span class="comment">   while the application is processing a buffer, the acquistion of the next buffer is done</span></div><div class="line"><span class="comment">   in parallel.</span></div><div class="line"><span class="comment">   The sample uses a pool of buffers that are passed to a stream grabber to be filled with</span></div><div class="line"><span class="comment">   image data. Once a buffer is filled and ready for processing, the buffer is retrieved from</span></div><div class="line"><span class="comment">   the stream grabber, processed, and passed back to the stream grabber to be filled again.</span></div><div class="line"><span class="comment">   Buffers retrieved from the stream grabber are not overwritten as long as</span></div><div class="line"><span class="comment">   they are not passed back to the stream grabber.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"><span class="comment">/* Calculating the minimum and maximum gray value */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax);</div><div class="line"></div><div class="line"><span class="preprocessor">#define NUM_GRABS 100         </span><span class="comment">/* Number of images to grab. */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define NUM_BUFFERS 5         </span><span class="comment">/* Number of buffers used for grabbing. */</span><span class="preprocessor"></span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;                      <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevices;               <span class="comment">/* Number of available devices. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev;                     <span class="comment">/* Handle for the pylon device. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2c3e1f8aa6bfd1a1141f840aae4381a3">PYLON_STREAMGRABBER_HANDLE</a>  hGrabber;                 <span class="comment">/* Handle for the pylon stream grabber. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a>     hWait;                    <span class="comment">/* Handle used for waiting for a grab to be finished. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      payloadSize;              <span class="comment">/* Size of an image frame in bytes. */</span></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>              *buffers[NUM_BUFFERS];     <span class="comment">/* Buffers used for grabbing. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gad50f3bf650f0859c7e1d70ad12a47f63">PYLON_STREAMBUFFER_HANDLE</a>   bufHandles[NUM_BUFFERS];  <span class="comment">/* Handles for the buffers. */</span></div><div class="line">    <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a>           grabResult;               <span class="comment">/* Stores the result of a grab operation. */</span></div><div class="line">    <span class="keywordtype">int</span>                         nGrabs;                   <span class="comment">/* Counts the number of buffers grabbed. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      nStreams;                 <span class="comment">/* The number of streams the device provides. */</span></div><div class="line">    _Bool                        isAvail;                  <span class="comment">/* Used for checking feature availability. */</span></div><div class="line">    _Bool                        isReady;                  <span class="comment">/* Used as an output parameter. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      i;                        <span class="comment">/* Counter. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevices );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( 0 == numDevices )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;No devices found.\n&quot;</span> );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( 0, &amp;hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for configuring</span></div><div class="line"><span class="comment">    parameters and for grabbing images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> buf[256];</div><div class="line">        <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">        _Bool isReadable;</div><div class="line"></div><div class="line">        isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>( hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isReadable )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz );</div><div class="line">            CHECK(res);</div><div class="line">            printf(<span class="stringliteral">&quot;Using camera %s\n&quot;</span>, buf);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Set the pixel format to Mono8 if available, where gray values will be output as 8 bit values for each pixel. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable acquisition start trigger if available. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_AcquisitionStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable frame burst start trigger if available. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameBurstStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameBurstStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable frame start trigger if available. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We will use the Continuous frame acquisition mode, i.e., the camera delivers</span></div><div class="line"><span class="comment">    images continuously. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;AcquisitionMode&quot;</span>, <span class="stringliteral">&quot;Continuous&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* For GigE cameras, we recommend increasing the packet size for better</span></div><div class="line"><span class="comment">       performance. When the network adapter supports jumbo frames, set the packet</span></div><div class="line"><span class="comment">       size to a value &gt; 1500, e.g., to 8192. In this sample, we only set the packet size</span></div><div class="line"><span class="comment">       to 1500. */</span></div><div class="line">    <span class="comment">/* ... Check first to see if the GigE camera packet size parameter is supported and if it is writable. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* ... The device supports the packet size feature, set a value. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, 1500 );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Image grabbing is done using a stream grabber.</span></div><div class="line"><span class="comment">      A device may be able to provide different streams. A separate stream grabber must</span></div><div class="line"><span class="comment">      be used for each stream. In this sample, we create a stream grabber for the default</span></div><div class="line"><span class="comment">      stream, i.e., the first stream ( index == 0 ).</span></div><div class="line"><span class="comment">      */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get the number of streams supported by the device and the transport layer. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga9a3ad0ce0576aaff19d7b6f3172ef5b8">PylonDeviceGetNumStreamGrabberChannels</a>( hDev, &amp;nStreams );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( nStreams &lt; 1 )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;The transport layer doesn&#39;t support image streams\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Create and open a stream grabber for the first channel. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga07365e8eb42cbbf992511899023428a2">PylonDeviceGetStreamGrabber</a>( hDev, 0, &amp;hGrabber );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga46fc44105ef8adf7110d3d0fcd51aea3">PylonStreamGrabberOpen</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the stream grabber&#39;s wait object. The wait object</span></div><div class="line"><span class="comment">       allows waiting for buffers to be filled with grabbed data. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga87891dfaee855990f39551d7fcf574c8">PylonStreamGrabberGetWaitObject</a>( hGrabber, &amp;hWait );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Determine the minimum size of the grab buffer.</span></div><div class="line"><span class="comment">       The size is determined by the configuration of the camera</span></div><div class="line"><span class="comment">       and the stream grabber. Be aware that this may change</span></div><div class="line"><span class="comment">       by changing critical parameters after this call.*/</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga24f157b352652e4e031b748160cede56">PylonStreamGrabberGetPayloadSize</a>( hDev, hGrabber, &amp;payloadSize );</div><div class="line">    CHECK( res );</div><div class="line"></div><div class="line">    <span class="comment">/* Allocate memory for grabbing.  */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        buffers[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) malloc ( payloadSize );</div><div class="line">        <span class="keywordflow">if</span> ( NULL == buffers[i] )</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Out of memory!\n&quot;</span> );</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* We must tell the stream grabber the number and size of the buffers</span></div><div class="line"><span class="comment">        we are using. */</span></div><div class="line">    <span class="comment">/* .. We will not use more than NUM_BUFFERS for grabbing. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga95bd2bdbbda3ec1029ff221d063ed81e">PylonStreamGrabberSetMaxNumBuffer</a>( hGrabber, NUM_BUFFERS );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* .. We will not use buffers bigger than payloadSize bytes. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga8eac300db1f6ee57bd3cb9a9ce44e1fd">PylonStreamGrabberSetMaxBufferSize</a>( hGrabber, payloadSize );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*  Allocate the resources required for grabbing. After this, critical parameters</span></div><div class="line"><span class="comment">        that impact the payload size must not be changed until FinishGrab() is called. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa0e2988f96c56e94b39d137009b902de">PylonStreamGrabberPrepareGrab</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Before using the buffers for grabbing, they must be registered at</span></div><div class="line"><span class="comment">       the stream grabber. For each registered buffer, a buffer handle</span></div><div class="line"><span class="comment">       is returned. After registering, these handles are used instead of the</span></div><div class="line"><span class="comment">       raw pointers. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#ga9cf59896fdbc833402259b3c6be9655e">PylonStreamGrabberRegisterBuffer</a>( hGrabber, buffers[i], payloadSize,  &amp;bufHandles[i] );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Feed the buffers into the stream grabber&#39;s input queue. For each buffer, the API</span></div><div class="line"><span class="comment">       allows passing in a pointer to additional context information. This pointer</span></div><div class="line"><span class="comment">       will be returned unchanged when the grab is finished. In our example, we use the index of the</span></div><div class="line"><span class="comment">       buffer as context information. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber, bufHandles[i], (<span class="keywordtype">void</span>*) i );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Now the stream grabber is prepared. As soon as the camera starts to acquire images,</span></div><div class="line"><span class="comment">       the image data will be grabbed into the buffers provided.  */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Start the image acquisition engine. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gad3f7e833b396daf05e44c54f3b951f84">PylonStreamGrabberStartStreamingIfMandatory</a>(hGrabber);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Let the camera acquire images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Grab NUM_GRABS images */</span></div><div class="line">    nGrabs = 0;                         <span class="comment">/* Counts the number of images grabbed */</span></div><div class="line">    <span class="keywordflow">while</span> ( nGrabs &lt; NUM_GRABS )</div><div class="line">    {</div><div class="line">        <span class="keywordtype">size_t</span> bufferIndex;              <span class="comment">/* Index of the buffer */</span></div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min, max;</div><div class="line">        <span class="comment">/* Wait for the next buffer to be filled. Wait up to 1000 ms. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga3b7ab1f6e2b1f71418a99fb05418a7c8">PylonWaitObjectWait</a>( hWait, 1000, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Timeout occurred. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Grab timeout occurred\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>; <span class="comment">/* Stop grabbing. */</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Since the wait operation was successful, the result of at least one grab</span></div><div class="line"><span class="comment">           operation is available. Retrieve it. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber, &amp;grabResult, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( ! isReady )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Oops. No grab result available? We should never have reached this point.</span></div><div class="line"><span class="comment">               Since the wait operation above returned without a timeout, a grab result</span></div><div class="line"><span class="comment">               should be available. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Failed to retrieve a grab result\n&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        nGrabs++;</div><div class="line"></div><div class="line">        <span class="comment">/* Get the buffer index from the context information. */</span></div><div class="line">        bufferIndex = (size_t) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3fa626bc45486a5b8561cbdfd3847ae4">Context</a>;</div><div class="line"></div><div class="line">        <span class="comment">/* Check to see if the image was grabbed successfully. */</span></div><div class="line">        if ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea354b91f0a367f3779da75499a612147a">Grabbed</a> )</div><div class="line">        {</div><div class="line">            <span class="comment">/*  Success. Perform image processing. Since we passed more than one buffer</span></div><div class="line"><span class="comment">            to the stream grabber, the remaining buffers are filled while</span></div><div class="line"><span class="comment">            we do the image processing. The processed buffer won&#39;t be touched by</span></div><div class="line"><span class="comment">            the stream grabber until we pass it back to the stream grabber. */</span></div><div class="line"></div><div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer;        <span class="comment">/* Pointer to the buffer attached to the grab result. */</span></div><div class="line"></div><div class="line">            <span class="comment">/* Get the buffer pointer from the result structure. Since we also got the buffer index,</span></div><div class="line"><span class="comment">               we could alternatively use buffers[bufferIndex]. */</span></div><div class="line">            buffer = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa24d463aa40da5523491da53b48eeaf1">pBuffer</a>;</div><div class="line"></div><div class="line">            <span class="comment">/* Perform processing. */</span></div><div class="line">            getMinMax( buffer, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a5de217563769a2fecc939a8803c0de49">SizeX</a>, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#ac53ad1519fff771ec8810fb5ffea222d">SizeY</a>, &amp;min, &amp;max );</div><div class="line">            printf(<span class="stringliteral">&quot;Grabbed frame %2d into buffer %2d. Min. gray value = %3u, Max. gray value = %3u\n&quot;</span>,</div><div class="line">                nGrabs, (<span class="keywordtype">int</span>) bufferIndex, min, max);</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">            <span class="comment">/* Display image */</span></div><div class="line">            res = PylonImageWindowDisplayImageGrabResult(0, &amp;grabResult);</div><div class="line">            CHECK(res);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea1f506c828f4945d6b5a7bf71445f7d54">Failed</a> )</div><div class="line">        {</div><div class="line">            fprintf( stderr,  <span class="stringliteral">&quot;Frame %d wasn&#39;t grabbed successfully.  Error code = 0x%08X\n&quot;</span>,</div><div class="line">                nGrabs, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a597c9f0ddc8e7a63df7e108441e9bd78">ErrorCode</a> );</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Once finished with the processing, requeue the buffer to be filled again. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a0dc087840e7dda694c92e8a54ac56838">hBuffer</a>, (<span class="keywordtype">void</span>*) bufferIndex );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. */</span></div><div class="line"></div><div class="line">    <span class="comment">/*  ... Stop the camera. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;AcquisitionStop&quot;</span>);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... Stop the image acquisition engine. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga7a2d429ce4f61d445f534305efcb3298">PylonStreamGrabberStopStreamingIfMandatory</a>(hGrabber);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... We must issue a flush call to ensure that all pending buffers are put into the</span></div><div class="line"><span class="comment">       stream grabber&#39;s output queue. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa571171cb0805c4d0490caa1413553ae">PylonStreamGrabberFlushBuffersToOutput</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ... The buffers can now be retrieved from the stream grabber. */</span></div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber, &amp;grabResult, &amp;isReady );</div><div class="line">        CHECK(res);</div><div class="line">    } <span class="keywordflow">while</span> ( isReady );</div><div class="line"></div><div class="line">    <span class="comment">/* ... When all buffers have been retrieved from the stream grabber, they can be deregistered.</span></div><div class="line"><span class="comment">           After that, it is safe to free the memory. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_BUFFERS; ++i )</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaa98d52b7c02efc120a7a36b45282b3b0">PylonStreamGrabberDeregisterBuffer</a>( hGrabber, bufHandles[i] );</div><div class="line">        CHECK(res);</div><div class="line">        free( buffers[i] );</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* ... Release grabbing related resources. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gab84d13dc2435c44750259a4bb185319a">PylonStreamGrabberFinishGrab</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* After calling PylonStreamGrabberFinishGrab(), parameters that impact the payload size (e.g.,</span></div><div class="line"><span class="comment">    the AOI width and height parameters) are unlocked and can be modified again. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* ... Close the stream grabber. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga01831a1617fdb98526757ed0e090f9f2">PylonStreamGrabberClose</a>( hGrabber );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* ... Close and release the pylon device. The stream grabber becomes invalid</span></div><div class="line"><span class="comment">       after closing the pylon device. Don&#39;t call stream grabber related methods after</span></div><div class="line"><span class="comment">       closing or releasing the device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ...The device is no longer used, destroy it. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="comment">/* ... Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve more details about the error.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Simple &quot;image processing&quot; function returning the minimum and maximum gray</span></div><div class="line"><span class="comment">   value of an 8 bit gray value image. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min = 255;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> max = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> val;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( p = pImg; p &lt; pImg + width * height; p++ )</div><div class="line">    {</div><div class="line">        val = *p;</div><div class="line">        <span class="keywordflow">if</span> ( val &gt; max )</div><div class="line">           max = val;</div><div class="line">        <span class="keywordflow">if</span> ( val &lt; min )</div><div class="line">           min = val;</div><div class="line">    }</div><div class="line">    *pMin = min;</div><div class="line">    *pMax = max;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_parametrizecamera"></a>
ParametrizeCamera Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  This sample illustrates how to read and write the different camera</span></div><div class="line"><span class="comment">  parameter types.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef __GNUC__</span></div><div class="line"><span class="preprocessor">#   include &lt;alloca.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"><span class="keywordtype">void</span> demonstrateAccessibilityCheck( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateIntFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateInt32Feature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateFloatFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateBooleanFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateFromStringToString( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateEnumFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"><span class="keywordtype">void</span> demonstrateCommandFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> );</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;           <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevices;    <span class="comment">/* Number of available devices. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev;          <span class="comment">/* Handle for the pylon device. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevices );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( 0 == numDevices )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;No devices found.\n&quot;</span> );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( 0, &amp;hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for configuring</span></div><div class="line"><span class="comment">    parameters and for grabbing images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> buf[256];</div><div class="line">        <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">        _Bool isReadable;</div><div class="line"></div><div class="line">        isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isReadable )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz );</div><div class="line">            CHECK(res);</div><div class="line">            printf(<span class="stringliteral">&quot;Using camera %s\n&quot;</span>, buf);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to check the accessibility of a feature. */</span></div><div class="line">    demonstrateAccessibilityCheck( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle integer camera parameters. */</span></div><div class="line">    demonstrateIntFeature( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">    demonstrateInt32Feature( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle floating point camera parameters. */</span></div><div class="line">    demonstrateFloatFeature( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle boolean camera parameters. */</span></div><div class="line">    demonstrateBooleanFeature( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Each feature can be read as a string and also set as a string. */</span></div><div class="line">    demonstrateFromStringToString( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to handle enumeration camera parameters. */</span></div><div class="line">    demonstrateEnumFeature( hDev );</div><div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Demonstrate how to execute actions. */</span></div><div class="line">    demonstrateCommandFeature( hDev );</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. Close and release the pylon device. */</span></div><div class="line"></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the more details about the error</span></div><div class="line"><span class="comment">    ... First find out how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to check the presence, readability, and writability</span></div><div class="line"><span class="comment">   of a feature. */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateAccessibilityCheck( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    _Bool val;  <span class="comment">/* Output of the check functions */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if a feature is implemented at all. */</span></div><div class="line">    val = <a class="code" href="group__pylon.html#ga32085fa30c27a5fc6fa9698057e2bc3f">PylonDeviceFeatureIsImplemented</a>(hDev, <span class="stringliteral">&quot;Width&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;Width&#39; feature %s implemented\n&quot;</span>, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line">    val = <a class="code" href="group__pylon.html#ga32085fa30c27a5fc6fa9698057e2bc3f">PylonDeviceFeatureIsImplemented</a>(hDev, <span class="stringliteral">&quot;MyCustomFeature&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;MyCustomFeature&#39; feature %s implemented\n&quot;</span>, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Although a feature is implemented by the device, it might not be available</span></div><div class="line"><span class="comment">       with the device in its current state. Check to see if the feature is currently</span></div><div class="line"><span class="comment">       available. The PylonDeviceFeatureIsAvailable sets val to 0 if either the feature</span></div><div class="line"><span class="comment">       is not implemented or if the feature is not currently available. */</span></div><div class="line"></div><div class="line">    val = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;BinningVertical&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;BinningVertical&#39; feature %s available\n&quot;</span>, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* If a feature is available, it could be read-only, write-only, or both</span></div><div class="line"><span class="comment">       readable and writable. Use the PylonDeviceFeatureIsReadable() and the</span></div><div class="line"><span class="comment">       PylonDeviceFeatureIsWritable() functions(). It is safe to call these functions</span></div><div class="line"><span class="comment">       for features that are currently not available or not implemented by the device.</span></div><div class="line"><span class="comment">       A feature that is not available or not implemented is neither readable nor writable.</span></div><div class="line"><span class="comment">       The readability and writability of a feature can change depending on the current</span></div><div class="line"><span class="comment">       state of the device. For example, the Width parameter might not be writable when</span></div><div class="line"><span class="comment">       the camera is acquiring images. */</span></div><div class="line"></div><div class="line"></div><div class="line">    val = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, <span class="stringliteral">&quot;Width&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;Width&#39; feature %s readable\n&quot;</span>, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line">    val = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>( hDev, <span class="stringliteral">&quot;MyCustomFeature&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;MyCustomFeature&#39; feature %s readable\n&quot;</span>, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line">    val = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>( hDev, <span class="stringliteral">&quot;Width&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;The &#39;Width&#39; feature %s writable\n&quot;</span>, val ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to handle integer camera parameters. */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateIntFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Width&quot;</span>;  <span class="comment">/* Name of the feature used in this sample: AOI Width */</span></div><div class="line">    int64_t             val, min, max, incr;      <span class="comment">/* Properties of the feature */</span></div><div class="line">    GENAPIC_RESULT      res;                      <span class="comment">/* Return value */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, featureName) )</div><div class="line">    {</div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">          Query the current value, the allowed value range, and the increment of the feature.</span></div><div class="line"><span class="comment">          For some integer features, you are not allowed to set every value within the</span></div><div class="line"><span class="comment">          value range. For example, for some cameras the Width parameter must be a multiple</span></div><div class="line"><span class="comment">          of 2. These constraints are expressed by the increment value. Valid values</span></div><div class="line"><span class="comment">          follow the rule: val &gt;= min &amp;&amp; val &lt;= max &amp;&amp; val == min + n * inc. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gae3a4b41a5f15a6b9c5e58af2b9729d8f">PylonDeviceGetIntegerFeatureMin</a>( hDev, featureName, &amp;min );  <span class="comment">/* Get the minimum value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaeeb89386ddc12bf89e3e6f41c1c82750">PylonDeviceGetIntegerFeatureMax</a>( hDev, featureName, &amp;max );  <span class="comment">/* Get the maximum value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#ga9e734ff5ec5e1f5174338691d9e78431">PylonDeviceGetIntegerFeatureInc</a>( hDev, featureName, &amp;incr);  <span class="comment">/* Get the increment value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gae91b560e639a7ad3182f388c3b57c185">PylonDeviceGetIntegerFeature</a>( hDev, featureName, &amp;val );     <span class="comment">/* Get the current value. */</span></div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"><span class="preprocessor">#if __STDC_VERSION__ &gt;= 199901L || defined(__GNUC__)</span></div><div class="line">        printf(<span class="stringliteral">&quot;%s: min= %lld  max= %lld  incr=%lld  Value=%lld\n&quot;</span>, featureName, (<span class="keywordtype">long</span> <span class="keywordtype">long</span> ) min, (<span class="keywordtype">long</span> <span class="keywordtype">long</span> ) max, (<span class="keywordtype">long</span> <span class="keywordtype">long</span> ) incr, (<span class="keywordtype">long</span> <span class="keywordtype">long</span> ) val );</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">        printf(<span class="stringliteral">&quot;%s: min= %I64d  max= %I64d  incr=%I64d  Value=%I64d\n&quot;</span>, featureName, min, max, incr, val );</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ( <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, featureName) )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Set the Width half-way between minimum and maximum. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev, featureName, min + (max - min) / incr / 2 * incr );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;The %s feature is not writable.\n&quot;</span>, featureName );</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;The %s feature is not readable.\n&quot;</span>, featureName );</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* The integer functions illustrated above take 64 bit integers as output parameters. There are variants</span></div><div class="line"><span class="comment">   of the integer functions that accept 32 bit integers instead. The Get.... functions return</span></div><div class="line"><span class="comment">   an error when the value returned by the device doesn&#39;t fit into a 32 bit integer. */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateInt32Feature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Height&quot;</span>;  <span class="comment">/* Name of the feature used in this sample: AOI height */</span></div><div class="line">    int32_t             val, min, max, incr;       <span class="comment">/* Properties of the feature */</span></div><div class="line">    GENAPIC_RESULT      res;                       <span class="comment">/* Return value */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, featureName) )</div><div class="line">    {</div><div class="line">        <span class="comment">/*</span></div><div class="line"><span class="comment">           Query the current value, the allowed value range, and the increment of the feature.</span></div><div class="line"><span class="comment">           For some integer features, you are not allowed to set every value within the</span></div><div class="line"><span class="comment">           value range. For example, for some cameras the Width parameter must be a multiple</span></div><div class="line"><span class="comment">           of 2. These constraints are expressed by the increment value. Valid values</span></div><div class="line"><span class="comment">           follow the rule: val &gt;= min &amp;&amp; val &lt;= max &amp;&amp; val == min + n * inc. */</span></div><div class="line">        res = PylonDeviceGetIntegerFeatureMinInt32( hDev, featureName, &amp;min );  <span class="comment">/* Get the minimum value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = PylonDeviceGetIntegerFeatureMaxInt32( hDev, featureName, &amp;max );  <span class="comment">/* Get the maximum value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = PylonDeviceGetIntegerFeatureIncInt32( hDev, featureName, &amp;incr);  <span class="comment">/* Get the increment value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        res = PylonDeviceGetIntegerFeatureInt32( hDev, featureName, &amp;val );     <span class="comment">/* Get the current value. */</span></div><div class="line">        CHECK(res);</div><div class="line">        printf(<span class="stringliteral">&quot;%s: min= %d  max= %d  incr=%d  Value=%d\n&quot;</span>, featureName, min, max, incr, val );</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> ( <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, featureName) )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Set the value to half its maximum  */</span></div><div class="line">            res = PylonDeviceSetIntegerFeatureInt32( hDev, featureName, min + (max - min) / incr / 2 * incr );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;The %s feature is not writable.\n&quot;</span>, featureName );</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;The %s feature is not readable.\n&quot;</span>, featureName );</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Some features are floating point features. This function illustrates how to set and get floating</span></div><div class="line"><span class="comment">   point parameters. */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateFloatFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Gamma&quot;</span>;  <span class="comment">/* The name of the feature used */</span></div><div class="line">    _Bool                isWritable;               <span class="comment">/* Is the feature writable? */</span></div><div class="line">    <span class="keywordtype">double</span>              min, max, value;          <span class="comment">/* Value range and current value */</span></div><div class="line">    GENAPIC_RESULT      res;                      <span class="comment">/* Return value */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, featureName) )</div><div class="line">    {</div><div class="line">        <span class="comment">/* Query the value range and the current value. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga9680e954cad71c9dc3d3fd04c9bda667">PylonDeviceGetFloatFeatureMin</a>( hDev, featureName, &amp;min);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gabf8bd507f7c09c6eeb6962896389c708">PylonDeviceGetFloatFeatureMax</a>( hDev, featureName, &amp;max);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaf7e5a67b74fe82fc9e3c944f8ad3da8c">PylonDeviceGetFloatFeature</a>( hDev, featureName, &amp;value );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        printf(<span class="stringliteral">&quot;%s: min = %4.2f, max = %4.2f, value = %4.2f\n&quot;</span>, featureName, min, max, value );</div><div class="line"></div><div class="line">        <span class="comment">/* Set the value to half its maximum. */</span></div><div class="line">        isWritable = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, featureName);</div><div class="line">        <span class="keywordflow">if</span> ( isWritable )</div><div class="line">        {</div><div class="line">            value = 0.5 * ( min + max );</div><div class="line">            printf(<span class="stringliteral">&quot;Setting %s to %4.2f\n&quot;</span>, featureName, value );</div><div class="line">            res = <a class="code" href="group__pylon.html#ga000efa39f55f2c51eef7d29fef7e6420">PylonDeviceSetFloatFeature</a>( hDev, featureName, value );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;The %s feature is not writable.\n&quot;</span>, featureName );</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;The %s feature is not readable.\n&quot;</span>, featureName );</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Some features are boolean features that can be switched on and off.</span></div><div class="line"><span class="comment">   This function illustrates how to access boolean features. */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateBooleanFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;GammaEnable&quot;</span>; <span class="comment">/* The name of the feature */</span></div><div class="line">    _Bool                isWritable;                    <span class="comment">/* Is the feature writable? */</span></div><div class="line">    _Bool                value;                         <span class="comment">/* The value of the feature */</span></div><div class="line">    GENAPIC_RESULT      res;                           <span class="comment">/* Return value */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the feature is writable. */</span></div><div class="line">    isWritable = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, featureName);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> ( isWritable )</div><div class="line">    {</div><div class="line">        <span class="comment">/* Retrieve the current state of the feature. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga2f6d5c1917521cbc55502aface12943f">PylonDeviceGetBooleanFeature</a>( hDev, featureName, &amp;value);</div><div class="line">        CHECK(res);</div><div class="line">        printf(<span class="stringliteral">&quot;The %s features is %s\n&quot;</span>, featureName, value ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span> );</div><div class="line"></div><div class="line">        <span class="comment">/* Set a new value. */</span></div><div class="line">        value = (_Bool) !value;  <span class="comment">/* New value */</span></div><div class="line">        printf(<span class="stringliteral">&quot;Switching the %s feature %s\n&quot;</span>, featureName, value ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span> );</div><div class="line">        res = <a class="code" href="group__pylon.html#gab566c93ad19a2aa3f0e4ae9589c54c47">PylonDeviceSetBooleanFeature</a>( hDev, featureName, value );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        printf(<span class="stringliteral">&quot;The %s feature isn&#39;t writable\n&quot;</span>, featureName );</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  Regardless of the parameter&#39;s type, any parameter value can be retrieved as a string. Each parameter</span></div><div class="line"><span class="comment">  can be set by passing in a string correspondingly. This function illustrates how to set and get the</span></div><div class="line"><span class="comment">  Width parameter as string. As demonstrated above, the Width parameter is of the integer type.</span></div><div class="line"><span class="comment">  */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateFromStringToString( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>   featureName[] = <span class="stringliteral">&quot;Width&quot;</span>;   <span class="comment">/* The name of the feature */</span></div><div class="line"></div><div class="line">    <span class="keywordtype">size_t</span>              len;</div><div class="line">    <span class="keywordtype">char</span>*               buf;</div><div class="line">    <span class="keywordtype">char</span>                smallBuf[1];</div><div class="line">    <span class="keywordtype">char</span>                properBuf[32];</div><div class="line">    GENAPIC_RESULT      res;                       <span class="comment">/* Return value */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get the value of a feature as a string. Normally getting the value consits of 3 steps:</span></div><div class="line"><span class="comment">       1.) Determine the required buffer size.</span></div><div class="line"><span class="comment">       2.) Allocate the buffer.</span></div><div class="line"><span class="comment">       3.) Retrieve the value. */</span></div><div class="line">    <span class="comment">/* ... Get the required buffer size. The size is queried by</span></div><div class="line"><span class="comment">           passing a NULL pointer as a pointer to the buffer. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, featureName, NULL, &amp;len );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="comment">/* ... Len is set to the required buffer size (terminating zero included).</span></div><div class="line"><span class="comment">           Allocate the memory and retrieve the string. */</span></div><div class="line">    buf = (<span class="keywordtype">char</span>*) alloca( len );</div><div class="line">    res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, featureName, buf, &amp;len );</div><div class="line">    CHECK( res );</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;%s: %s\n&quot;</span>, featureName, buf );</div><div class="line"></div><div class="line">    <span class="comment">/* You are not necessarily required to query the buffer size in advance. If the buffer is</span></div><div class="line"><span class="comment">       big enough, passing in a buffer and a pointer to its length will work.</span></div><div class="line"><span class="comment">       When the buffer is too small, an error is returned. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Passing in a buffer that is too small */</span></div><div class="line">    len = <span class="keyword">sizeof</span> (smallBuf);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, featureName, smallBuf, &amp;len );</div><div class="line">    <span class="keywordflow">if</span> ( res == <a class="code" href="group__errorcodes.html#ga13ccf80133dac135eb9da4ba1737dda1">GENAPI_E_INSUFFICIENT_BUFFER</a> )</div><div class="line">    {</div><div class="line">        <span class="comment">/* The buffer was too small. The required size is indicated by len. */</span></div><div class="line">        printf(<span class="stringliteral">&quot;Buffer is too small for the value of &#39;%s&#39;. The required buffer size is %d\n&quot;</span>, featureName, (<span class="keywordtype">int</span>) len );</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        CHECK(res);  <span class="comment">/* Unexpected return value */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Passing in a buffer with sufficient size. */</span></div><div class="line">    len = <span class="keyword">sizeof</span> (properBuf );</div><div class="line">    res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, featureName, properBuf, &amp;len );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* A feature can be set as a string using the PylonDeviceFeatureFromString() function.</span></div><div class="line"><span class="comment">       If the content of a string can not be converted to the type of the feature, an</span></div><div class="line"><span class="comment">       error is returned. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, featureName, <span class="stringliteral">&quot;fourty-two&quot;</span>); <span class="comment">/* Can not be converted to an integer */</span></div><div class="line">    <span class="keywordflow">if</span> ( res != <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a> )</div><div class="line">    {</div><div class="line">        <span class="comment">/* Print out an error message. */</span></div><div class="line">        <span class="keywordtype">size_t</span> l;</div><div class="line">        <span class="keywordtype">char</span> *msg;</div><div class="line">        <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;l ); <span class="comment">/* Retrieve buffer size for the error message */</span></div><div class="line">        msg = (<span class="keywordtype">char</span> *)malloc(l);             <span class="comment">/* Provide memory */</span></div><div class="line">        <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( msg, &amp;l );  <span class="comment">/* Retrieve the message */</span></div><div class="line">        printf(<span class="stringliteral">&quot;%s\n&quot;</span>, msg );</div><div class="line">        free(msg);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* There are camera features that behave like enumerations. These features can take a value from a fixed</span></div><div class="line"><span class="comment">   set of possible values. One example is the pixel format feature. This function illustrates how to deal with</span></div><div class="line"><span class="comment">   enumeration features.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="keywordtype">void</span> demonstrateEnumFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span>                value[64];                     <span class="comment">/* The current value of the feature */</span></div><div class="line">    <span class="keywordtype">size_t</span>              len;                           <span class="comment">/* The length of the string */</span></div><div class="line">    GENAPIC_RESULT      res;                           <span class="comment">/* Return value */</span></div><div class="line">    _Bool                isWritable,</div><div class="line">                        supportsMono8,</div><div class="line">                        supportsYUV422Packed,</div><div class="line">                        supportsMono16;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* The allowed values for an enumeration feature are represented as strings. Use the</span></div><div class="line"><span class="comment">    PylonDeviceFeatureFromString() and PylonDeviceFeatureToString() methods for setting and getting</span></div><div class="line"><span class="comment">    the value of an enumeration feature. */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Get the current value of the enumeration feature. */</span></div><div class="line">    len = <span class="keyword">sizeof</span>(value);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, value, &amp;len );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    printf(<span class="stringliteral">&quot;PixelFormat: %s\n&quot;</span>, value);</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">      For an enumeration feature, the pylon Viewer&#39;s &quot;Feature Documentation&quot; window lists the the</span></div><div class="line"><span class="comment">      names of the possible values. Some of the values might not be supported by the device.</span></div><div class="line"><span class="comment">      To check if a certain &quot;SomeValue&quot; value for a &quot;SomeFeature&quot; feature can be set, call the</span></div><div class="line"><span class="comment">      PylonDeviceFeatureIsAvailable() function with &quot;EnumEntry_SomeFeature_SomeValue&quot; as an argument.</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="comment">/* Check to see if the Mono8 pixel format can be set. */</span></div><div class="line">    supportsMono8 = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;Mono8 %s a supported value for the PixelFormat feature\n&quot;</span>, supportsMono8 ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the YUV422Packed pixel format can be set. */</span></div><div class="line">    supportsYUV422Packed = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_YUV422Packed&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;YUV422Packed %s a supported value for the PixelFormat feature\n&quot;</span>, supportsYUV422Packed ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">/* Check to see if the Mono16 pixel format can be set. */</span></div><div class="line">    supportsMono16 = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono16&quot;</span>);</div><div class="line">    printf(<span class="stringliteral">&quot;Mono16 %s a supported value for the PixelFormat feature\n&quot;</span>, supportsMono16 ? <span class="stringliteral">&quot;is&quot;</span> : <span class="stringliteral">&quot;isn&#39;t&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Before writing a value, we recommend checking to see if the enumeration feature is</span></div><div class="line"><span class="comment">       currently writable. */</span></div><div class="line">    isWritable = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isWritable )</div><div class="line">    {</div><div class="line">        <span class="comment">/* The PixelFormat feature is writable, set it to one of the supported values. */</span></div><div class="line">        <span class="keywordflow">if</span> ( supportsMono16 )</div><div class="line">        {</div><div class="line">            printf(<span class="stringliteral">&quot;Setting PixelFormat to Mono16\n&quot;</span>);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono16&quot;</span> );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( supportsYUV422Packed )</div><div class="line">        {</div><div class="line">            printf(<span class="stringliteral">&quot;Setting PixelFormat to YUV422Packed\n&quot;</span>);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;YUV422Packed&quot;</span> );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( supportsMono8 )</div><div class="line">        {</div><div class="line">            printf(<span class="stringliteral">&quot;Setting PixelFormat to Mono8\n&quot;</span>);</div><div class="line">            res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">            CHECK(res);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Reset the PixelFormat feature to its previous value. */</span></div><div class="line">        <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, value );</div><div class="line">    }</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* There are camera features, such as starting image acquisition, that represent a command.</span></div><div class="line"><span class="comment">   This function that loads the factory settings, illustrates how to execute a command feature.  */</span></div><div class="line"><span class="keywordtype">void</span> demonstrateCommandFeature( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev )</div><div class="line">{</div><div class="line">    GENAPIC_RESULT      res;  <span class="comment">/* Return value. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before executing the user set load command, the user set selector must be</span></div><div class="line"><span class="comment">       set to the default set. Since we are focusing on the command feature,</span></div><div class="line"><span class="comment">       we skip the recommended steps for checking the availability of the user set</span></div><div class="line"><span class="comment">       related features and values. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Choose the default configuration set (with one of the factory setups chosen). */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;UserSetSelector&quot;</span>, <span class="stringliteral">&quot;Default&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Execute the user set load command. */</span></div><div class="line">    printf(<span class="stringliteral">&quot;Loading the default set.\n&quot;</span>);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev, <span class="stringliteral">&quot;UserSetLoad&quot;</span> );</div><div class="line">    CHECK(res);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_simplegrab"></a>
SimpleGrab Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">This sample illustrates how to use the PylonDeviceGrabSingleFrame() convenience</span></div><div class="line"><span class="comment">method for grabbing images in a loop. PylonDeviceGrabSingleFrame() grabs one</span></div><div class="line"><span class="comment">single frame in single frame mode.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">Grabbing in single frame acquisition mode is the easiest way to grab images. Note: in single frame</span></div><div class="line"><span class="comment">mode the maximum frame rate of the camera can&#39;t be achieved. The full frame</span></div><div class="line"><span class="comment">rate can be achieved by setting the camera to the continuous frame acquisition</span></div><div class="line"><span class="comment">mode and by grabbing in overlapped mode, i.e., image acquisition is done in parallel</span></div><div class="line"><span class="comment">with image processing. This is illustrated in the OverlappedGrab sample program.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">/* Simple error handling. */</span></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message</span></div><div class="line"><span class="comment">   for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"><span class="comment">/* Calculating the minimum and maximum gray value of an image buffer */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT          res;           <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                  numDevices;    <span class="comment">/* Number of available devices. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>     hDev;          <span class="comment">/* Handle for the pylon device. */</span></div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span>               numGrabs = 10; <span class="comment">/* Number of images to grab. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                  payloadSize=0;   <span class="comment">/* Size of an image frame in bytes. */</span></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*          imgBuf;        <span class="comment">/* Buffer used for grabbing. */</span></div><div class="line">    _Bool                    isAvail;</div><div class="line">    <span class="keywordtype">int</span>                     i;</div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device! */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevices );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( 0 == numDevices )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;No devices found!\n&quot;</span> );</div><div class="line">        <span class="comment">/* Before exiting a program, PylonTerminate() should be called to release</span></div><div class="line"><span class="comment">           all pylon related resources. */</span></div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( 0, &amp;hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for configuring</span></div><div class="line"><span class="comment">    parameters and for grabbing images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> buf[256];</div><div class="line">        <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">        _Bool isReadable;</div><div class="line"></div><div class="line">        isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isReadable )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz );</div><div class="line">            CHECK(res);</div><div class="line">            printf(<span class="stringliteral">&quot;Using camera %s\n&quot;</span>, buf);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Set the pixel format to Mono8 if available, where gray values will be output as 8 bit values for each pixel. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev, <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>(hDev, <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable acquisition start trigger if available */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_AcquisitionStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable frame burst start trigger if available. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameBurstStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameBurstStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Disable frame start trigger if available */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>( hDev, <span class="stringliteral">&quot;EnumEntry_TriggerSelector_FrameStart&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> (isAvail)</div><div class="line">    {</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameStart&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev, <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;Off&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* For GigE cameras, we recommend increasing the packet size for better</span></div><div class="line"><span class="comment">       performance. If the network adapter supports jumbo frames, set the packet</span></div><div class="line"><span class="comment">       size to a value &gt; 1500, e.g., to 8192. In this sample, we only set the packet size</span></div><div class="line"><span class="comment">       to 1500. */</span></div><div class="line">    <span class="comment">/* ... Check first to see if the GigE camera packet size parameter is supported</span></div><div class="line"><span class="comment">        and if it is writable. */</span></div><div class="line">    isAvail = <a class="code" href="group__pylon.html#ga0c098c66dbf69f8d9c214620818ffa88">PylonDeviceFeatureIsWritable</a>(hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>);</div><div class="line">    <span class="keywordflow">if</span> ( isAvail )</div><div class="line">    {</div><div class="line">        <span class="comment">/* ... The device supports the packet size feature. Set a value. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev, <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, 1500 );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Determine the required size of the grab buffer. */</span></div><div class="line"></div><div class="line">    </div><div class="line">    {</div><div class="line">        <a class="code" href="group__pylon.html#ga2c3e1f8aa6bfd1a1141f840aae4381a3">PYLON_STREAMGRABBER_HANDLE</a>  hGrabber;</div><div class="line">        <span class="comment">/* Temporary create and open a stream grabber for the first channel. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga07365e8eb42cbbf992511899023428a2">PylonDeviceGetStreamGrabber</a>( hDev, 0, &amp;hGrabber );</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#ga46fc44105ef8adf7110d3d0fcd51aea3">PylonStreamGrabberOpen</a>( hGrabber );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga24f157b352652e4e031b748160cede56">PylonStreamGrabberGetPayloadSize</a>( hDev, hGrabber, &amp;payloadSize );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga01831a1617fdb98526757ed0e090f9f2">PylonStreamGrabberClose</a>( hGrabber );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Allocate memory for grabbing. */</span></div><div class="line">    imgBuf = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) malloc( payloadSize );</div><div class="line">    <span class="keywordflow">if</span> ( NULL == imgBuf )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;Out of memory.\n&quot;</span> );</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Grab some images in a loop. */</span></div><div class="line">    <span class="keywordflow">for</span> ( i = 0; i &lt; numGrabs; ++i )</div><div class="line">    {</div><div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min, max;</div><div class="line">        <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a> grabResult;</div><div class="line">        _Bool bufferReady;</div><div class="line"></div><div class="line">        <span class="comment">/* Grab one single frame from stream channel 0. The</span></div><div class="line"><span class="comment">        camera is set to single frame acquisition mode.</span></div><div class="line"><span class="comment">        Wait up to 500 ms for the image to be grabbed. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gafea7db714d0542d2e47e68d288700004">PylonDeviceGrabSingleFrame</a>( hDev, 0, imgBuf, payloadSize,</div><div class="line">            &amp;grabResult, &amp;bufferReady, 500 );</div><div class="line">        <span class="keywordflow">if</span> ( <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a> == res &amp;&amp; !bufferReady )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Timeout occurred. */</span></div><div class="line">            printf(<span class="stringliteral">&quot;Frame %d: timeout\n&quot;</span>, i+1);</div><div class="line">        }</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Check to see if the image was grabbed successfully. */</span></div><div class="line">        <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea354b91f0a367f3779da75499a612147a">Grabbed</a> )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Success. Perform image processing. */</span></div><div class="line">            getMinMax( imgBuf, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a5de217563769a2fecc939a8803c0de49">SizeX</a>, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#ac53ad1519fff771ec8810fb5ffea222d">SizeY</a>, &amp;min, &amp;max );</div><div class="line">            printf(<span class="stringliteral">&quot;Grabbed frame #%2d. Min. gray value = %3u, Max. gray value = %3u\n&quot;</span>, i+1, min, max);</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">            <span class="comment">/* Display image */</span></div><div class="line">            res = PylonImageWindowDisplayImageGrabResult(0, &amp;grabResult);</div><div class="line">            CHECK(res);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea1f506c828f4945d6b5a7bf71445f7d54">Failed</a> )</div><div class="line">        {</div><div class="line">            fprintf( stderr,  <span class="stringliteral">&quot;Frame %d wasn&#39;t grabbed successfully.  Error code = 0x%08X\n&quot;</span>,</div><div class="line">                i+1, grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a597c9f0ddc8e7a63df7e108441e9bd78">ErrorCode</a> );</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. Close and release the pylon device. */</span></div><div class="line"></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Free memory for grabbing. */</span></div><div class="line">    free( imgBuf );</div><div class="line"></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="comment">/* Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... Find out first how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve more details about the error.</span></div><div class="line"><span class="comment">    ... Find out first how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Simple &quot;image processing&quot; function returning the minimum and maximum gray</span></div><div class="line"><span class="comment">   value of an 8 bit gray value image. */</span></div><div class="line"><span class="keywordtype">void</span> getMinMax( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pImg, int32_t width, int32_t height,</div><div class="line">               <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMin, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pMax)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> min = 255;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> max = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> val;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *p;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> ( p = pImg; p &lt; pImg + width * height; p++ )</div><div class="line">    {</div><div class="line">        val = *p;</div><div class="line">        <span class="keywordflow">if</span> ( val &gt; max )</div><div class="line">           max = val;</div><div class="line">        <span class="keywordflow">if</span> ( val &lt; min )</div><div class="line">           min = val;</div><div class="line">    }</div><div class="line">    *pMin = min;</div><div class="line">    *pMax = max;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_surpriseremoval"></a>
SurpriseRemoval Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">This sample program demonstrates how to be informed about the removal of a device.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  Attention:</span></div><div class="line"><span class="comment">  If you build this sample in debug mode and run it using a GigE camera device, pylon will set the heartbeat</span></div><div class="line"><span class="comment">  timeout to 5 minutes. This is done to allow debugging and single stepping of the code without</span></div><div class="line"><span class="comment">  the camera thinking we&#39;re hung because we don&#39;t send any heartbeats.</span></div><div class="line"><span class="comment">  This also means that it would normally take 5 minutes for the application to notice that a GigE device</span></div><div class="line"><span class="comment">  has been disconnected.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">  To work around this, the heartbeat timeout will be set to 1000 ms before we remove a device and wait to</span></div><div class="line"><span class="comment">  notice the removal.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef __GNUC__</span></div><div class="line"><span class="preprocessor">#   include &lt;unistd.h&gt;</span></div><div class="line"><span class="preprocessor">#   define Sleep(ms) usleep(ms*1000)</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> callbackCounter = 0;  <span class="comment">/* Will be incremented by the callback function. */</span></div><div class="line"></div><div class="line"><span class="comment">/* Simple error handling */</span></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message</span></div><div class="line"><span class="comment">for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* This function will be registered as a callback function that is called</span></div><div class="line"><span class="comment">when the opened device has been removed. On Windows only stdcall functions can be registered. */</span></div><div class="line"><span class="keywordtype">void</span> GENAPIC_CC removalCallbackFunction(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDevice );</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* Sets the heartbeat timeout. */</span></div><div class="line">int64_t setHeartbeatTimeout( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDevice, int64_t timeout_ms );</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;                <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevices;         <span class="comment">/* Number of available devices.   */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev;               <span class="comment">/* Handle for the pylon device.   */</span></div><div class="line">    <a class="code" href="group__pylon.html#gadaa0121941f8002c24db376ef11809c2">PYLON_DEVICECALLBACK_HANDLE</a> hCb;                <span class="comment">/* Required for deregistering the callback. */</span></div><div class="line">    <span class="keywordtype">int</span>                         loopCount;          <span class="comment">/* Counter. */</span></div><div class="line">    <span class="keywordtype">int</span>                         isGigECamera;       <span class="comment">/* 1 if the device is a GigE device. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all camera devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevices );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( 0 == numDevices )</div><div class="line">    {</div><div class="line">        fprintf( stderr, <span class="stringliteral">&quot;No devices found.\n&quot;</span> );</div><div class="line">        <span class="comment">/* Before exiting a program, PylonTerminate() should be called to release</span></div><div class="line"><span class="comment">        all pylon related resources. */</span></div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get a handle for the first device found.  */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( 0, &amp;hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Before using the device, it must be opened. Open it for configuring</span></div><div class="line"><span class="comment">    parameters and for grabbing images. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev, PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> buf[256];</div><div class="line">        <span class="keywordtype">size_t</span> siz = <span class="keyword">sizeof</span>(buf);</div><div class="line">        _Bool isReadable;</div><div class="line"></div><div class="line">        isReadable = <a class="code" href="group__pylon.html#gaaef3e0144fd4f0ad0f18540899994d8d">PylonDeviceFeatureIsReadable</a>(hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( isReadable )</div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga5a76d4b8774f57ce24f30fe6da41abf7">PylonDeviceFeatureToString</a>( hDev, <span class="stringliteral">&quot;DeviceModelName&quot;</span>, buf, &amp;siz );</div><div class="line">            CHECK(res);</div><div class="line">            printf(<span class="stringliteral">&quot;Using camera %s\n&quot;</span>, buf);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Register the callback function. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gae4e7a3fc641dd79dfc38ca8acdf0436d">PylonDeviceRegisterRemovalCallback</a>( hDev, removalCallbackFunction, &amp;hCb );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* For GigE cameras, the application periodically sends heartbeat signals to the camera to keep the</span></div><div class="line"><span class="comment">    connection to the camera alive. If the camera doesn&#39;t receive heartbeat signals within the time</span></div><div class="line"><span class="comment">    period specified by the heartbeat timeout counter, the camera resets the connection.</span></div><div class="line"><span class="comment">    When the application is stopped by the debugger, the application cannot create the heartbeat signals.</span></div><div class="line"><span class="comment">    For that reason, the pylon runtime extends the heartbeat timeout when debugging to 5 minutes to allow</span></div><div class="line"><span class="comment">    debugging. For GigE cameras, we will set the heartbeat timeout to a shorter period before testing the</span></div><div class="line"><span class="comment">    callbacks.</span></div><div class="line"><span class="comment">    The heartbeat mechanism is also used for detection of device removal. When the pylon runtime doesn&#39;t</span></div><div class="line"><span class="comment">    receive an acknowledge for the heartbeat signal, it is assumed that the device has been removed. A</span></div><div class="line"><span class="comment">    removal callback will be fired in that case.</span></div><div class="line"><span class="comment">    By decreasing the heartbeat timeout, the surprise removal will be noticed earlier. */</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Find out if we are using a GigE camera. */</span></div><div class="line">        <a class="code" href="struct_pylon_device_info__t.html">PylonDeviceInfo_t</a> devInfo;</div><div class="line">        res = <a class="code" href="group__pylon.html#gaecd6211310dd30bd56c1826d1d173899">PylonDeviceGetDeviceInfo</a>( hDev, &amp;devInfo );</div><div class="line">        CHECK(res);</div><div class="line">        isGigECamera = 0 == strcmp( devInfo.<a class="code" href="struct_pylon_device_info__t.html#a4dee0c94c4000dcbcf2dc84f3e565295">DeviceClass</a>, <span class="stringliteral">&quot;BaslerGigE&quot;</span> );</div><div class="line"></div><div class="line">        <span class="comment">/* Adjust the heartbeat timeout. */</span></div><div class="line">        <span class="keywordflow">if</span> ( isGigECamera )</div><div class="line">        {</div><div class="line">            setHeartbeatTimeout( hDev, 1000 );  <span class="comment">/* 1000 ms */</span></div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Ask the user to disconnect a device. */</span></div><div class="line">    loopCount = 20 * 4;</div><div class="line">    printf( <span class="stringliteral">&quot;Please disconnect the device (timeout %d s) \n&quot;</span>, loopCount / 4 );</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Wait until the removal has been noticed and callback function has been fired. */</span></div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        <span class="comment">/* Print a . every few seconds to tell the user we&#39;re waiting for the callback. */</span></div><div class="line">        <span class="keywordflow">if</span> (--loopCount % 4 == 0)</div><div class="line">        {</div><div class="line">            printf(<span class="stringliteral">&quot;.&quot;</span>);</div><div class="line">            fflush(stdout);</div><div class="line">        }</div><div class="line"></div><div class="line">        Sleep(250);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">while</span> (callbackCounter &lt; 1 &amp;&amp; loopCount &gt;= 0);  <span class="comment">/*  Check loopCount so we won&#39;t wait forever. */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (callbackCounter &lt; 1)</div><div class="line">        printf( <span class="stringliteral">&quot;\nTimeout expired. Device hasn&#39;t been removed.\n&quot;</span> );</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Clean up. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* ... Deregister the removal callback. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga137b49e403c32bb666d18f8237cf7002">PylonDeviceDeregisterRemovalCallback</a>( hDev, hCb );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* ....Close and release the pylon device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev );</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Shut down the pylon runtime system. Don&#39;t call any pylon method after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* The function to be called when the removal of an opened device is detected. */</span></div><div class="line"><span class="keywordtype">void</span> GENAPIC_CC removalCallbackFunction(<a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDevice )</div><div class="line">{</div><div class="line">    <a class="code" href="struct_pylon_device_info__t.html">PylonDeviceInfo_t</a>   di;</div><div class="line">    GENAPIC_RESULT      res;</div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name of the device. It is not possible to read the name</span></div><div class="line"><span class="comment">    from the camera since it has been removed. Use the device&#39;s device</span></div><div class="line"><span class="comment">    information instead. For accessing the device information, no reading from</span></div><div class="line"><span class="comment">    the device is required. */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the device information for the removed device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gaecd6211310dd30bd56c1826d1d173899">PylonDeviceGetDeviceInfo</a>( hDevice, &amp;di );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Print out the name. */</span></div><div class="line">    printf( <span class="stringliteral">&quot;\nCallback function for removal of device %s (%s).\n&quot;</span>, di.<a class="code" href="struct_pylon_device_info__t.html#a8a61332f81f9f4fd7ee26c25dcfbfa0e">FriendlyName</a>, di.<a class="code" href="struct_pylon_device_info__t.html#a31918f34454cab1350e39ece08569f78">FullName</a> );</div><div class="line"></div><div class="line">    <span class="comment">/* Increment the counter to indicate that the callback has been fired. */</span></div><div class="line">    callbackCounter++;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/* If the device provides a heartbeat timeout, this function will set the heartbeat timeout.</span></div><div class="line"><span class="comment">   When the device provides the parameter, the old value is returned, -1 otherwise.</span></div><div class="line"><span class="comment">   The heartbeat timeout is a parameter provided by the transport layer.</span></div><div class="line"><span class="comment">   The transport layer parameters are exposed as a GenApi node map that</span></div><div class="line"><span class="comment">   can be retrieved from the device.</span></div><div class="line"><span class="comment">*/</span></div><div class="line">int64_t setHeartbeatTimeout( <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a> hDev, int64_t timeout_ms )</div><div class="line">{</div><div class="line"></div><div class="line">    <a class="code" href="group__genapi.html#ga3db34c6a854e89e2551d4c1e8a8afe56">NODEMAP_HANDLE</a>              hNodemap;   <span class="comment">/* Handle to the node map */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga9a893906c491cef62e73124d1ddae198">NODE_HANDLE</a>                 hNode;      <span class="comment">/* Handle to a node, i.e., a feature */</span></div><div class="line">    GENAPIC_RESULT              res;        <span class="comment">/* Return value */</span></div><div class="line">    int64_t                     oldTimeout; <span class="comment">/* The current timeout value */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Get the node map for the transport layer parameters. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#gad12c9521b848016cb6cc5b48453701c2">PylonDeviceGetTLNodeMap</a>( hDev, &amp;hNodemap );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNodemap )</div><div class="line">    {</div><div class="line">        <span class="comment">/* The device doesn&#39;t provide a transport layer node map. Nothing to do. */</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line">    <span class="comment">/* Get the node for the heartbeat timeout parameter. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga903a4b86f5c57f37d06f710a1b54e4ec">GenApiNodeMapGetNode</a>( hNodemap, <span class="stringliteral">&quot;HeartbeatTimeout&quot;</span>, &amp;hNode );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="group__genapi.html#gabafd031e272a150976caa09a8ef73258">GENAPIC_INVALID_HANDLE</a> == hNode )</div><div class="line">    {</div><div class="line">        <span class="comment">/* There is no heartbeat timeout parameter. Nothing to do. */</span></div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Get the current value. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#ga20bf17967c93dfb9fe63abec04423bd0">GenApiIntegerGetValue</a>( hNode, &amp;oldTimeout );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Set the new value. */</span></div><div class="line">    res = <a class="code" href="group__genapi.html#gac50b79c0b5285b9552966fa7049c1d81">GenApiIntegerSetValue</a>( hNode, timeout_ms );</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* Return the old value. */</span></div><div class="line">    <span class="keywordflow">return</span> oldTimeout;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">size_t</span> length;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message.</span></div><div class="line"><span class="comment">    ... Find out first how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve more details about the error.</span></div><div class="line"><span class="comment">    ... Find out first how big the buffer must be, */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <span class="comment">/* ... and retrieve the message. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, errMsg);</div><div class="line">    free( errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="samples_triggeredgrab"></a>
ActionCommands Sample</h1>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">   This sample illustrates how to grab images</span></div><div class="line"><span class="comment">   using a GigE Vision action command to trigger multiple cameras.</span></div><div class="line"><span class="comment">   At least 2 connected GigE cameras are required for this sample.</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#ifndef _WIN32_WINNT</span></div><div class="line"><span class="preprocessor">#   define _WIN32_WINNT 0x0400</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;malloc.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_pylon_c_8h.html">pylonc/PylonC.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">/* Limits the amount of cameras used for grabbing.</span></div><div class="line"><span class="comment">It is important to manage the available bandwidth when grabbing with multiple</span></div><div class="line"><span class="comment">cameras. This applies, for instance, if two GigE cameras are connected to the</span></div><div class="line"><span class="comment">same network adapter via a switch. To manage the bandwidth, the GevSCPD</span></div><div class="line"><span class="comment">interpacket delay parameter and the GevSCFTD transmission delay parameter can</span></div><div class="line"><span class="comment">be set for each GigE camera device. The &quot;Controlling Packet Transmission Timing</span></div><div class="line"><span class="comment">with the Interpacket and Frame Transmission Delays on Basler GigE Vision Cameras&quot;</span></div><div class="line"><span class="comment">Application Note (AW000649xx000) provides more information about this topic. */</span></div><div class="line"><span class="preprocessor">#define MAX_NUM_DEVICES 4</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define GIGE_PACKET_SIZE       1500 </span><span class="comment">/* Size of one Ethernet packet. */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define GIGE_PROTOCOL_OVERHEAD 36   </span><span class="comment">/* Total number of bytes of protocol overhead. */</span><span class="preprocessor"></span></div><div class="line"></div><div class="line"><span class="preprocessor">#define CHECK( errc ) if ( GENAPI_E_OK != errc ) printErrorAndExit( errc )</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> uint32_t AllGroupMask = 0xffffffff;</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc );</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    GENAPIC_RESULT              res;                      <span class="comment">/* Return value of pylon methods. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      i;                        <span class="comment">/* Generic loop variable */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevicesEnumerated;     <span class="comment">/* Number of available devices. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      numDevicesToUse;          <span class="comment">/* Number of usable devices. */</span></div><div class="line">    _Bool                       isAvail;                  <span class="comment">/* Used for checking feature availability. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      enumeratedDeviceIndex;    <span class="comment">/* Index of device when accessing the enumeration result. */</span></div><div class="line">    <span class="keywordtype">size_t</span>                      deviceIndex;              <span class="comment">/* Index of device used in this sample. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga0d7504543e64485cafb24eeb77c9da77">PYLON_WAITOBJECTS_HANDLE</a>    wos = NULL;               <span class="comment">/* Wait objects. */</span></div><div class="line">    uint32_t                    DeviceKey;                <span class="comment">/* Random device key used in this session. It will be initialized below. */</span></div><div class="line">    uint32_t                    GroupKey;                 <span class="comment">/* Group key for the devices. In this sample all devices will be in the same group. */</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* These are camera-specific variables. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gae9c73a5792f379665b1304f1998ab0b5">PYLON_DEVICE_HANDLE</a>         hDev[MAX_NUM_DEVICES];        <span class="comment">/* Handle for the pylon device. */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2c3e1f8aa6bfd1a1141f840aae4381a3">PYLON_STREAMGRABBER_HANDLE</a>  hGrabber[MAX_NUM_DEVICES];    <span class="comment">/* Handle for the pylon stream grabber. */</span></div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>              *buffers[MAX_NUM_DEVICES];     <span class="comment">/* Buffers used for grabbing. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gad50f3bf650f0859c7e1d70ad12a47f63">PYLON_STREAMBUFFER_HANDLE</a>   bufHandles[MAX_NUM_DEVICES];  <span class="comment">/* Handles for the buffers. */</span></div><div class="line">    <a class="code" href="struct_pylon_device_info__t.html">PylonDeviceInfo_t</a>           deviceInfos[MAX_NUM_DEVICES]; <span class="comment">/* Information about enumerated devices */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Seed the random number generator. */</span></div><div class="line">    srand((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)time(NULL));</div><div class="line"></div><div class="line">    <span class="comment">/* Get random device key used in this session. */</span></div><div class="line">    DeviceKey = rand();</div><div class="line">    <span class="comment">/* In this sample all cameras will belong to the same group. */</span></div><div class="line">    GroupKey = 0x24;</div><div class="line"></div><div class="line">    <span class="comment">/* Before using any pylon methods, the pylon runtime must be initialized. */</span></div><div class="line">    <a class="code" href="group__pylon.html#gab3304990fb825b61d47267f6cfb7b768">PylonInitialize</a>();</div><div class="line"></div><div class="line">    <span class="comment">/* Enumerate all devices. You must call</span></div><div class="line"><span class="comment">    PylonEnumerateDevices() before creating a device. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga107201b44a28c3d5fb655e89a73946e9">PylonEnumerateDevices</a>( &amp;numDevicesEnumerated );</div><div class="line">    CHECK(res);</div><div class="line">    <span class="keywordflow">if</span> ( numDevicesEnumerated == 0 )</div><div class="line">    {</div><div class="line">        fprintf( stdout, <span class="stringliteral">&quot;No devices found!\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_FAILURE);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Create wait objects so we can wait for the images of each camera */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga353472a82bfd5779376c28d32844227a">PylonWaitObjectsCreate</a>(&amp;wos);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line">    <span class="comment">/* =======================================================================</span></div><div class="line"><span class="comment">     *  Open Cameras and Set Parameters.</span></div><div class="line"><span class="comment">     * ======================================================================= */</span></div><div class="line">    deviceIndex = 0;</div><div class="line">    <span class="keywordflow">for</span> (enumeratedDeviceIndex = 0; enumeratedDeviceIndex &lt; numDevicesEnumerated; ++enumeratedDeviceIndex)</div><div class="line">    {</div><div class="line">        <a class="code" href="struct_pylon_device_info__t.html">PylonDeviceInfo_t</a> di;</div><div class="line"></div><div class="line">        <a class="code" href="group__pylon.html#ga71c722f722db7e3541dabf6ee56a1323">PylonGetDeviceInfo</a>(deviceIndex, &amp;di);</div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga71c722f722db7e3541dabf6ee56a1323">PylonGetDeviceInfo</a>( enumeratedDeviceIndex, &amp;di);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (strcmp(di.<a class="code" href="struct_pylon_device_info__t.html#a4dee0c94c4000dcbcf2dc84f3e565295">DeviceClass</a>, <span class="stringliteral">&quot;BaslerGigE&quot;</span>) != 0)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Action commands are only supported by GigE cameras. */</span></div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Get a handle for the device. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa635d34dd80fbd30a1d495d90e3e152b">PylonCreateDeviceByIndex</a>( enumeratedDeviceIndex, &amp;hDev[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Before using the device, it must be opened. Open it for setting</span></div><div class="line"><span class="comment">        parameters and for grabbing images. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa90f00f56a23d31abe6634ff33fb981d">PylonDeviceOpen</a>( hDev[deviceIndex], PYLONC_ACCESS_MODE_CONTROL | PYLONC_ACCESS_MODE_STREAM );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* When the device has been opened successfully, we remember its deviceinfo</span></div><div class="line"><span class="comment">           so we can print out the name device name, etc. later */</span></div><div class="line">        deviceInfos[deviceIndex] = di;</div><div class="line"></div><div class="line">        <span class="comment">/* Print out the name of the camera we are using. */</span></div><div class="line">        printf(<span class="stringliteral">&quot;Using camera &#39;%s&#39;\n&quot;</span>, deviceInfos[deviceIndex].ModelName);</div><div class="line"></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev[deviceIndex], <span class="stringliteral">&quot;ActionControl&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> (! isAvail)</div><div class="line">        {</div><div class="line">            <span class="comment">/* Action Command feature is not available. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Device doesn&#39;t support the Action Control&quot;</span>);</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit( EXIT_SUCCESS );</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Configure the first action (Action1)*/</span></div><div class="line">        res = PylonDeviceSetIntegerFeatureInt32( hDev[deviceIndex], <span class="stringliteral">&quot;ActionSelector&quot;</span>, 1 );</div><div class="line">        CHECK( res );</div><div class="line">        res = PylonDeviceSetIntegerFeatureInt32( hDev[deviceIndex], <span class="stringliteral">&quot;ActionDeviceKey&quot;</span>, DeviceKey );</div><div class="line">        CHECK( res );</div><div class="line">        res = PylonDeviceSetIntegerFeatureInt32( hDev[deviceIndex], <span class="stringliteral">&quot;ActionGroupKey&quot;</span>, GroupKey );</div><div class="line">        CHECK( res );</div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;ActionGroupMask&quot;</span>, AllGroupMask );</div><div class="line">        CHECK( res );</div><div class="line"></div><div class="line">        <span class="comment">/* Set the trigger mode to FrameStart and TriggerSource to first action. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerSelector&quot;</span>, <span class="stringliteral">&quot;FrameStart&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerMode&quot;</span>, <span class="stringliteral">&quot;On&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;TriggerSource&quot;</span>, <span class="stringliteral">&quot;Action1&quot;</span> );  <span class="comment">/* Action1 corresponds to ActionSelector=1. */</span></div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Set the pixel format to Mono8, where gray values will be output as 8-bit values for each pixel. */</span></div><div class="line">        <span class="comment">/* ... First check to see if the device supports the Mono8 format. */</span></div><div class="line">        isAvail = <a class="code" href="group__pylon.html#gaf6282be053e2f24b16b7abd93c46b989">PylonDeviceFeatureIsAvailable</a>(hDev[deviceIndex], <span class="stringliteral">&quot;EnumEntry_PixelFormat_Mono8&quot;</span>);</div><div class="line">        <span class="keywordflow">if</span> ( ! isAvail )</div><div class="line">        {</div><div class="line">            <span class="comment">/* Feature is not available. */</span></div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;Device doesn&#39;t support the Mono8 pixel format.\n&quot;</span>);</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit (EXIT_SUCCESS);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* ... Set the pixel format to Mono8. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaff15e9141876f4cc9879ac36dbb69383">PylonDeviceFeatureFromString</a>( hDev[deviceIndex], <span class="stringliteral">&quot;PixelFormat&quot;</span>, <span class="stringliteral">&quot;Mono8&quot;</span> );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* For GigE cameras, we recommend increasing the packet size for better</span></div><div class="line"><span class="comment">        performance. When the network adapter supports jumbo frames, set the packet</span></div><div class="line"><span class="comment">        size to a value &gt; 1500, e.g. to 8192. In this sample, we only set the packet size</span></div><div class="line"><span class="comment">        to 1500.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">        Also we set the Inter-Packet and the Frame Transmission delay</span></div><div class="line"><span class="comment">        so that the switch can line up packets in a better way.</span></div><div class="line"><span class="comment">        */</span></div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;GevSCPSPacketSize&quot;</span>, GIGE_PACKET_SIZE );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;GevSCPD&quot;</span>, (GIGE_PACKET_SIZE + GIGE_PROTOCOL_OVERHEAD)*(MAX_NUM_DEVICES-1) );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6197f7aa18b1689db37665d7ae5c36e1">PylonDeviceSetIntegerFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;GevSCFTD&quot;</span>, (GIGE_PACKET_SIZE + GIGE_PROTOCOL_OVERHEAD) * deviceIndex );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* One device created */</span></div><div class="line">        ++deviceIndex;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Remember the number of devices actually created. */</span></div><div class="line">    numDevicesToUse = deviceIndex;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (numDevicesToUse == 0)</div><div class="line">    {</div><div class="line">        fprintf(stderr, <span class="stringliteral">&quot;No suitable cameras found!\n&quot;</span>);</div><div class="line">        <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">        pressEnterToExit();</div><div class="line">        exit(EXIT_SUCCESS);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (numDevicesToUse &lt; 2)</div><div class="line">    {</div><div class="line">        printf(<span class="stringliteral">&quot;WARNING: This sample works best with two or more GigE cameras supporting action commands.\n&quot;</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/*  ======================================================================</span></div><div class="line"><span class="comment">        Allocate and Register Buffers for Grab.</span></div><div class="line"><span class="comment">        ====================================================================== */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; numDevicesToUse; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <a class="code" href="group__pylon.html#gafdb4d183db8398ddab4366083e86a17f">PYLON_WAITOBJECT_HANDLE</a> hWait;</div><div class="line">        <span class="keywordtype">size_t</span> payloadSize;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Image grabbing is done using a stream grabber.</span></div><div class="line"><span class="comment">          A device may be able to provide different streams. A separate stream grabber must</span></div><div class="line"><span class="comment">          be used for each stream. In this sample, we create a stream grabber for the default</span></div><div class="line"><span class="comment">          stream, i.e., the first stream ( index == 0 ).</span></div><div class="line"><span class="comment">          */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Get the number of streams supported by the device and the transport layer. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga9a3ad0ce0576aaff19d7b6f3172ef5b8">PylonDeviceGetNumStreamGrabberChannels</a>( hDev[deviceIndex], &amp;i );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="keywordflow">if</span> ( i &lt; 1 )</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;The transport layer doesn&#39;t support image streams.\n&quot;</span>);</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* Create and open a stream grabber for the first channel. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga07365e8eb42cbbf992511899023428a2">PylonDeviceGetStreamGrabber</a>( hDev[deviceIndex], 0, &amp;hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line">        res = <a class="code" href="group__pylon.html#ga46fc44105ef8adf7110d3d0fcd51aea3">PylonStreamGrabberOpen</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Get a handle for the stream grabber&#39;s wait object. The wait object</span></div><div class="line"><span class="comment">           allows waiting for buffers to be filled with grabbed data. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga87891dfaee855990f39551d7fcf574c8">PylonStreamGrabberGetWaitObject</a>( hGrabber[deviceIndex], &amp;hWait );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Add the stream grabber&#39;s wait object to our wait objects.</span></div><div class="line"><span class="comment">           This is needed to be able to wait until at least one camera has</span></div><div class="line"><span class="comment">           grabbed an image in the grab loop below. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa4047a9ffc958de25a824ebf5931a21c">PylonWaitObjectsAdd</a>(wos, hWait, NULL);</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Determine the required size of the grab buffer. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga24f157b352652e4e031b748160cede56">PylonStreamGrabberGetPayloadSize</a>( hDev[deviceIndex], hGrabber[deviceIndex], &amp;payloadSize );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Allocate memory for grabbing.  */</span></div><div class="line">        buffers[deviceIndex] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) malloc ( payloadSize );</div><div class="line">        <span class="keywordflow">if</span> ( NULL == buffers[deviceIndex] )</div><div class="line">        {</div><div class="line">            fprintf( stderr, <span class="stringliteral">&quot;Out of memory.\n&quot;</span> );</div><div class="line">            <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line">            pressEnterToExit();</div><div class="line">            exit(EXIT_FAILURE);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">/* We must tell the stream grabber the number and size of the buffers</span></div><div class="line"><span class="comment">            we are using. */</span></div><div class="line">        <span class="comment">/* .. We will not use more than NUM_BUFFERS for grabbing. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga95bd2bdbbda3ec1029ff221d063ed81e">PylonStreamGrabberSetMaxNumBuffer</a>( hGrabber[deviceIndex], 1 );</div><div class="line">        CHECK(res);</div><div class="line">        <span class="comment">/* .. We will not use buffers bigger than payloadSize bytes. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga8eac300db1f6ee57bd3cb9a9ce44e1fd">PylonStreamGrabberSetMaxBufferSize</a>( hGrabber[deviceIndex], payloadSize );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/*  Allocate the resources required for grabbing. After this, critical parameters</span></div><div class="line"><span class="comment">            that impact the payload size must not be changed until FinishGrab() is called. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa0e2988f96c56e94b39d137009b902de">PylonStreamGrabberPrepareGrab</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Before using the buffers for grabbing, they must be registered at</span></div><div class="line"><span class="comment">           the stream grabber. For each registered buffer, a buffer handle</span></div><div class="line"><span class="comment">           is returned. After registering, these handles are used instead of the</span></div><div class="line"><span class="comment">           raw pointers. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga9cf59896fdbc833402259b3c6be9655e">PylonStreamGrabberRegisterBuffer</a>( hGrabber[deviceIndex], buffers[deviceIndex], payloadSize,  &amp;bufHandles[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* Feed the buffers into the stream grabber&#39;s input queue. For each buffer, the API</span></div><div class="line"><span class="comment">           allows passing in a pointer to additional context information. This pointer</span></div><div class="line"><span class="comment">           will be returned unchanged when the grab is finished. In our example, we use the index of the</span></div><div class="line"><span class="comment">           camera as context information. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaf60db059b9fb6185ebafb858ba22b87b">PylonStreamGrabberQueueBuffer</a>( hGrabber[deviceIndex], bufHandles[deviceIndex], (<span class="keywordtype">void</span> *) deviceIndex );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* The stream grabber is now prepared. As soon as the camera starts acquiring images,</span></div><div class="line"><span class="comment">       the image data will be grabbed into the provided buffers.  */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; numDevicesToUse; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <span class="comment">/* Let the camera acquire images. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>( hDev[deviceIndex], <span class="stringliteral">&quot;AcquisitionStart&quot;</span>);</div><div class="line">        <span class="comment">/* Do not call CHECK() here! Instead exit the loop. */</span></div><div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a>)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*  ======================================================================</span></div><div class="line"><span class="comment">        Issue an ActionCommand and Retrieve the Images.</span></div><div class="line"><span class="comment">        ====================================================================== */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Only start the grab loop if all cameras have been &quot;started&quot; */</span></div><div class="line">    <span class="keywordflow">if</span> (res == <a class="code" href="group__errorcodes.html#gac7281a9a8cebe48fa600a002fbd3b598">GENAPI_E_OK</a>)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">char</span> subnet[ 32 ] = {<span class="charliteral">&#39;\0&#39;</span>}; <span class="comment">/* reserve space for a dotted ip address */</span></div><div class="line">        <span class="keywordtype">size_t</span> buflen = <span class="keyword">sizeof</span> subnet;</div><div class="line">        <a class="code" href="group__pylon.html#ga4b2b511c6d053c3e7c8f963e99bd4635">PYLON_DEVICE_INFO_HANDLE</a> hDevInfo = NULL;</div><div class="line"></div><div class="line">        <span class="comment">/* Retrieve subnet broadcast address of first device.</span></div><div class="line"><span class="comment">           We must query this GigE specific value explicitly as it isn&#39;t contained</span></div><div class="line"><span class="comment">           in the generic PylonDeviceInfo_t struct. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gadbb583dfd7e8515bb16346aa3b9a9bc8">PylonDeviceGetDeviceInfoHandle</a>( hDev[0], &amp;hDevInfo );</div><div class="line">        CHECK( res );</div><div class="line">        res = <a class="code" href="group__pylon.html#gad51b6363d6c9f5c1b7022047a5a9c9b3">PylonDeviceInfoGetPropertyValueByName</a>( hDevInfo, <span class="stringliteral">&quot;SubnetAddress&quot;</span>, subnet, &amp;buflen );</div><div class="line">        CHECK( res );</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Trigger the camera using an action command. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gac715eb52d896f104f3a3f21bc6a1c9c4">PylonGigEIssueActionCommand</a>( DeviceKey, GroupKey, AllGroupMask, subnet, 0, NULL, NULL);</div><div class="line">        CHECK( res );</div><div class="line"></div><div class="line">        <span class="comment">/* Grab one image from each camera. */</span></div><div class="line">        <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; numDevicesToUse; ++deviceIndex)</div><div class="line">        {</div><div class="line">            _Bool isReady;</div><div class="line">            <span class="keywordtype">size_t</span> woIndex = 0;</div><div class="line">            <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a> grabResult;</div><div class="line"></div><div class="line">            <span class="comment">/* Wait for the next buffer to be filled. Wait up to 5000 ms.*/</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga3650b45e8e45fd56f9775abb485f4e4a">PylonWaitObjectsWaitForAny</a>(wos, 5000, &amp;woIndex, &amp;isReady );</div><div class="line">            CHECK(res);</div><div class="line">            <span class="keywordflow">if</span> ( !isReady )</div><div class="line">            {  <span class="comment">/* Timeout occurred. */</span></div><div class="line"></div><div class="line">                <span class="comment">/* Grab timeout occurred. */</span></div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Grab timeout occurred.\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>; <span class="comment">/* Stop grabbing. */</span></div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* The woIndex corresponds to the index of the camera in handle arrays. */</span></div><div class="line"></div><div class="line">            <span class="comment">/* Retrieve the grab result. */</span></div><div class="line">            res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber[woIndex], &amp;grabResult, &amp;isReady );</div><div class="line">            CHECK(res);</div><div class="line">            <span class="keywordflow">if</span> ( !isReady )</div><div class="line">            {</div><div class="line">                <span class="comment">/* Oops. No grab result available? We should never have reached this point.</span></div><div class="line"><span class="comment">                   Since the wait operation above returned without a timeout, a grab result</span></div><div class="line"><span class="comment">                   should be available. */</span></div><div class="line">                fprintf(stderr, <span class="stringliteral">&quot;Failed to retrieve a grab result\n&quot;</span>);</div><div class="line">                <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            <span class="comment">/* Check to see whether the image was grabbed successfully. */</span></div><div class="line">            <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea354b91f0a367f3779da75499a612147a">Grabbed</a> &amp;&amp; grabResult.<a class="code" href="struct_pylon_grab_result__t.html#aa25e070149bff5b1fc6a0de3c672da09">PayloadType</a> == <a class="code" href="group__pylon.html#ggae045660cc6522c7dcabd1cf0ff24bb86abdd58e7cd82758c07fb960798b68b61c">PayloadType_Image</a> )</div><div class="line">            {</div><div class="line">                <span class="comment">/*  Success. Perform image processing. Since we passed more than one buffer</span></div><div class="line"><span class="comment">                to the stream grabber, the remaining buffers are filled while</span></div><div class="line"><span class="comment">                we are doing the image processing. The processed buffer won&#39;t be touched by</span></div><div class="line"><span class="comment">                the stream grabber until we pass it back to the stream grabber. */</span></div><div class="line"></div><div class="line">                <span class="comment">/* Pointer to the buffer attached to the grab result.</span></div><div class="line"><span class="comment">                   Get the buffer pointer from the result structure. Since we also got the buffer index,</span></div><div class="line"><span class="comment">                   we could alternatively use buffers[bufferIndex]. */</span></div><div class="line">                <span class="comment">/* Unsigned char* buffer = (unsigned char*) grabResult.pBuffer; */</span></div><div class="line"></div><div class="line"></div><div class="line">                <span class="comment">/* Perform processing. */</span></div><div class="line">                printf(<span class="stringliteral">&quot;Grabbed frame from camera %u into buffer.\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) woIndex);</div><div class="line"></div><div class="line"><span class="preprocessor">#ifdef GENAPIC_WIN_BUILD</span></div><div class="line">                <span class="comment">/* Display image. */</span></div><div class="line">                <span class="keywordflow">if</span> (woIndex &lt;= 31)</div><div class="line">                {</div><div class="line">                    res = PylonImageWindowDisplayImageGrabResult(woIndex, &amp;grabResult);</div><div class="line">                    CHECK(res);</div><div class="line">                }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a3217646a22faa23c898dfdc892ca3aca">Status</a> == <a class="code" href="group__pylon.html#gga7ef7a5f4d132577498ce7206274046fea1f506c828f4945d6b5a7bf71445f7d54">Failed</a> )</div><div class="line">            {</div><div class="line">                <span class="comment">/* If a buffer has been incompletely grabbed, the network bandwidth is possibly insufficient for transferring</span></div><div class="line"><span class="comment">                   multiple images simultaneously. See note on MAX_NUM_DEVICES. */</span></div><div class="line">                fprintf( stderr, <span class="stringliteral">&quot;Frame wasn&#39;t grabbed successfully.  Error code = 0x%08X\n&quot;</span>,</div><div class="line">                            grabResult.<a class="code" href="struct_pylon_grab_result__t.html#a597c9f0ddc8e7a63df7e108441e9bd78">ErrorCode</a> );</div><div class="line">            }</div><div class="line">        } <span class="comment">/* for */</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* ========================================================================</span></div><div class="line"><span class="comment">        Clean up.</span></div><div class="line"><span class="comment">       ======================================================================== */</span></div><div class="line"></div><div class="line">    <span class="comment">/* Stop the image acquisition on the cameras. */</span></div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; numDevicesToUse; ++deviceIndex)</div><div class="line">    {</div><div class="line">        <span class="comment">/*  ... Stop the camera. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga6dde7a627bdcc2405151c822fd2a9bb1">PylonDeviceExecuteCommandFeature</a>(hDev[deviceIndex], <span class="stringliteral">&quot;AcquisitionStop&quot;</span>);</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/* Remove all wait objects from waitobjects. */</span></div><div class="line">    res = <a class="code" href="group__pylon.html#ga47b8cc6b77fc52d35772d8a1bbc218b2">PylonWaitObjectsRemoveAll</a>(wos);</div><div class="line">    CHECK(res);</div><div class="line">    res = <a class="code" href="group__pylon.html#gacc38d5a8d53dc1b3bd4764727d31e6f1">PylonWaitObjectsDestroy</a>(wos);</div><div class="line">    CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* Do the cleanup for each camera we&#39;ve set up. */</span></div><div class="line">    <span class="keywordflow">for</span> (deviceIndex = 0; deviceIndex &lt; numDevicesToUse; ++deviceIndex)</div><div class="line">    {</div><div class="line">        _Bool rdy;</div><div class="line">        <a class="code" href="struct_pylon_grab_result__t.html">PylonGrabResult_t</a> grabResult;</div><div class="line"></div><div class="line">        <span class="comment">/* Issue a flush call to ensure that all queued buffers are put into the</span></div><div class="line"><span class="comment">           stream grabber&#39;s output queue. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa571171cb0805c4d0490caa1413553ae">PylonStreamGrabberFlushBuffersToOutput</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* The buffers can now be retrieved from the stream grabbers output queue. */</span></div><div class="line">        <span class="keywordflow">do</span></div><div class="line">        {</div><div class="line">            res = <a class="code" href="group__pylon.html#ga09611f06841721829628143f91beef96">PylonStreamGrabberRetrieveResult</a>( hGrabber[deviceIndex], &amp;grabResult, &amp;rdy );</div><div class="line">            CHECK(res);</div><div class="line">        } <span class="keywordflow">while</span> ( rdy );</div><div class="line"></div><div class="line">        <span class="comment">/* After all buffers have been retrieved from the stream grabber, they can be deregistered.</span></div><div class="line"><span class="comment">           After deregistering the buffers, it is safe to free the memory. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gaa98d52b7c02efc120a7a36b45282b3b0">PylonStreamGrabberDeregisterBuffer</a>( hGrabber[deviceIndex], bufHandles[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line">        free( buffers[deviceIndex] );</div><div class="line"></div><div class="line">        <span class="comment">/* Release grabbing related resources. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#gab84d13dc2435c44750259a4bb185319a">PylonStreamGrabberFinishGrab</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line">        <span class="comment">/* When PylonStreamGrabberFinishGrab() has been called, parameters that impact the payload size (e.g.,</span></div><div class="line"><span class="comment">        the AOI width and height parameters) are unlocked and can be modified again. */</span></div><div class="line"></div><div class="line">        <span class="comment">/* Close the stream grabber. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga01831a1617fdb98526757ed0e090f9f2">PylonStreamGrabberClose</a>( hGrabber[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/* Close and release the pylon device. The stream grabber becomes invalid</span></div><div class="line"><span class="comment">           after closing the pylon device. Don&#39;t call stream grabber related methods after</span></div><div class="line"><span class="comment">           closing or releasing the device. */</span></div><div class="line">        res = <a class="code" href="group__pylon.html#ga41878ee7b3ba7064553a6aac3ca37bcd">PylonDeviceClose</a>( hDev[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line"></div><div class="line"></div><div class="line">        res = <a class="code" href="group__pylon.html#ga52908e60392f52b4bd055c5e821c4b62">PylonDestroyDevice</a> ( hDev[deviceIndex] );</div><div class="line">        CHECK(res);</div><div class="line">    }</div><div class="line"></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    <span class="comment">/* ... Shut down the pylon runtime system. Don&#39;t call any pylon function after</span></div><div class="line"><span class="comment">       calling PylonTerminate(). */</span></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This method demonstrates how to retrieve the error message for the last failed</span></div><div class="line"><span class="comment">   function call. */</span></div><div class="line"><span class="keywordtype">void</span> printErrorAndExit( GENAPIC_RESULT errc )</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> *errMsg;</div><div class="line">    <span class="keywordtype">char</span> *errDetail;</div><div class="line">    <span class="keywordtype">size_t</span> length = 0;</div><div class="line"></div><div class="line">    <span class="comment">/* Retrieve the error message using double calling. */</span></div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( NULL, &amp;length );</div><div class="line">    errMsg = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <a class="code" href="group__genapi.html#ga63a2890e8dac339372faebea5695abbd">GenApiGetLastErrorMessage</a>( errMsg, &amp;length );</div><div class="line"></div><div class="line">    <span class="comment">/* Get the detailed error message. */</span></div><div class="line">    length = 0;</div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( NULL, &amp;length );</div><div class="line">    errDetail = (<span class="keywordtype">char</span>*) malloc( length );</div><div class="line">    <a class="code" href="group__genapi.html#ga739bba460344dcd2b64062fd26d5261c">GenApiGetLastErrorDetail</a>( errDetail, &amp;length );</div><div class="line"></div><div class="line"></div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;%s (%#08x).\n%s\n&quot;</span>, errMsg, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) errc, errDetail);</div><div class="line"></div><div class="line">    free(errDetail);</div><div class="line">    free(errMsg);</div><div class="line"></div><div class="line">    <a class="code" href="group__pylon.html#ga2879c3121624d1f2ab48171a92f12503">PylonTerminate</a>();  <span class="comment">/* Releases all pylon resources. */</span></div><div class="line">    pressEnterToExit();</div><div class="line"></div><div class="line">    exit(EXIT_FAILURE);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* This function can be used to wait for user input at the end of the sample program. */</span></div><div class="line"><span class="keywordtype">void</span> pressEnterToExit(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    fprintf( stderr, <span class="stringliteral">&quot;\nPress enter to exit.\n&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span>( getchar() != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
<hr>
<div id="projectname">pylon C <span id="projectnumber">6.1.0</span></div>
<address><small>Copyright (c) 2006-2020 <a href="http://www.baslerweb.com/">Basler AG</a>   (Mon Mar 16 2020 10:56:45)</small></address>
</body>
</html>
