#
# Automatically generated by generate-makefiles.sh -- DO NOT EDIT.
#
# Restrictions for generate-makefiles.sh apply to this file. See COPYING for
# more details.
#
# Ngie Cooper, June 2010
#

# Path variables.
top_srcdir?=		../../..
subdir=			functional/timers/clocks
srcdir=			$(top_srcdir)/$(subdir)

prefix?=		/opt/ltp
exec_prefix?=		$(prefix)
INSTALL_DIR=		$(DESTDIR)/$(exec_prefix)/$(subdir)
LOGFILE?=		logfile

# Build variables
CFLAGS+=		-I$(top_srcdir)/include

# XXX: for testfrmw.c -- needs to be moved into a library.
CFLAGS+=		-I$(srcdir)

# Top-level make definitions
CFLAGS+=		-std=c99 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -W -Wall
LDFLAGS+=		
LDLIBS+=		
# Parameters from the top level configure
CC=		aarch64-poky-linux-gcc  -mcpu=cortex-a53+crc+crypto -Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed -fstack-protector-strong -Wl,-z,relro,-z,now -fstack-protector-strong  -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security -Werror=format-security --sysroot=/mnt/nxp/imx8mp/OK8MP-linux-yocto/build-imx8mp/tmp/work/aarch64-poky-linux/ltp/20190517-r0/recipe-sysroot
CFLAGS+=	 -O2 -pipe -g -feliminate-unused-debug-types -fmacro-prefix-map=/mnt/nxp/imx8mp/OK8MP-linux-yocto/build-imx8mp/tmp/work/aarch64-poky-linux/ltp/20190517-r0=/usr/src/debug/ltp/20190517-r0                      -fdebug-prefix-map=/mnt/nxp/imx8mp/OK8MP-linux-yocto/build-imx8mp/tmp/work/aarch64-poky-linux/ltp/20190517-r0=/usr/src/debug/ltp/20190517-r0                      -fdebug-prefix-map=/mnt/nxp/imx8mp/OK8MP-linux-yocto/build-imx8mp/tmp/work/aarch64-poky-linux/ltp/20190517-r0/recipe-sysroot=                      -fdebug-prefix-map=/mnt/nxp/imx8mp/OK8MP-linux-yocto/build-imx8mp/tmp/work/aarch64-poky-linux/ltp/20190517-r0/recipe-sysroot-native= 
LDLIBS+=	
LDFLAGS+=	-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed -fstack-protector-strong -Wl,-z,relro,-z,now
# Submake make definitions.
CFLAGS+=		
LDFLAGS+=		
LDLIBS+=		

INSTALL_TARGETS+=	clocks_invaliddates.run-test clocks_twopsetclock.run-test
MAKE_TARGETS+=		clocks_invaliddates.run-test clocks_twopsetclock.run-test

all: $(MAKE_TARGETS)
	@if [ -d speculative ]; then $(MAKE) -C speculative all; fi

clean:
	rm -f $(MAKE_TARGETS) logfile* run.sh *.core
	@if [ -d speculative ]; then $(MAKE) -C speculative clean; fi

install: $(INSTALL_DIR) run.sh
	set -e; for file in $(INSTALL_TARGETS) run.sh; do	\
		if [ -f "$$file" ] ; then			\
			install -m 00755 $$file		\
				$(INSTALL_DIR)/$$file;	\
		fi;						\
	done
	@if [ -d speculative ]; then $(MAKE) -C speculative install; fi

test: run.sh
	@./run.sh

$(INSTALL_DIR):
	mkdir -p $@

run.sh:
	@echo '#/bin/sh' > $@
	@echo "$(top_srcdir)/bin/run-tests.sh $(subdir) $(INSTALL_TARGETS)" >> $@
	@chmod +x run.sh

clocks_invaliddates.run-test: $(srcdir)/invaliddates.c
	@if $(CC)  $(CFLAGS) $(LDFLAGS) -o $@ $(srcdir)/invaliddates.c $(LDLIBS) > logfile.$$$$ 2>&1; then \
		 cat logfile.$$$$; \
		 echo "$(subdir)/invaliddates compile PASSED"; \
		 echo "$(subdir)/invaliddates compile PASSED" >> $(LOGFILE); \
	else \
		 cat logfile.$$$$; \
		 echo "$(subdir)/invaliddates compile FAILED; SKIPPING"; \
		(echo "$(subdir)/invaliddates compile FAILED; SKIPPING"; cat logfile.$$$$) >> $(LOGFILE); \
	fi; \
	rm -f logfile.$$$$

clocks_twopsetclock.run-test: $(srcdir)/twopsetclock.c
	@if $(CC)  $(CFLAGS) $(LDFLAGS) -o $@ $(srcdir)/twopsetclock.c $(LDLIBS) > logfile.$$$$ 2>&1; then \
		 cat logfile.$$$$; \
		 echo "$(subdir)/twopsetclock compile PASSED"; \
		 echo "$(subdir)/twopsetclock compile PASSED" >> $(LOGFILE); \
	else \
		 cat logfile.$$$$; \
		 echo "$(subdir)/twopsetclock compile FAILED; SKIPPING"; \
		(echo "$(subdir)/twopsetclock compile FAILED; SKIPPING"; cat logfile.$$$$) >> $(LOGFILE); \
	fi; \
	rm -f logfile.$$$$

